<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="\u2003How to debug a Rust program? $ gdb excutable Simple example:\nViewing a variable&rsquo;s address:\nFormatted output of p s:\n$17 = alloc::string::String { vec: alloc::vec::Vec&lt;u8, alloc::alloc::Global&gt; { buf: alloc::raw_vec::RawVec&lt;u8, alloc::alloc::Global&gt; { ptr: core::ptr::unique::Unique&lt;u8&gt; { pointer: core::ptr::non_null::NonNull&lt;u8&gt; { pointer: 0x5555555abb80 }, _marker: core::marker::PhantomData&lt;u8&gt; }, cap: alloc::raw_vec::Cap (16), alloc: alloc::alloc::Global }, len: 16 } } Key points: p &lt;variable&gt; p &amp;&lt;variable&gt; ptype &lt;variable&gt;\n">
<title>Explore Rust (Basic) &amp; Revisiting gdb</title>

<link rel='canonical' href='http://fyshxfish.github.io/p/explore-rust-basic-revisiting-gdb/'>

<link rel="stylesheet" href="/scss/style.min.32d39ffafd07039ac37b1f407c93fed8292d6d4f1670d493fa508706db079c45.css"><meta property='og:title' content="Explore Rust (Basic) & Revisiting gdb">
<meta property='og:description' content="\u2003How to debug a Rust program? $ gdb excutable Simple example:\nViewing a variable&rsquo;s address:\nFormatted output of p s:\n$17 = alloc::string::String { vec: alloc::vec::Vec&lt;u8, alloc::alloc::Global&gt; { buf: alloc::raw_vec::RawVec&lt;u8, alloc::alloc::Global&gt; { ptr: core::ptr::unique::Unique&lt;u8&gt; { pointer: core::ptr::non_null::NonNull&lt;u8&gt; { pointer: 0x5555555abb80 }, _marker: core::marker::PhantomData&lt;u8&gt; }, cap: alloc::raw_vec::Cap (16), alloc: alloc::alloc::Global }, len: 16 } } Key points: p &lt;variable&gt; p &amp;&lt;variable&gt; ptype &lt;variable&gt;\n">
<meta property='og:url' content='http://fyshxfish.github.io/p/explore-rust-basic-revisiting-gdb/'>
<meta property='og:site_name' content='fyshXplore'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='rust' /><meta property='article:published_time' content='2024-08-05T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2024-08-05T00:00:00&#43;00:00'/>
<meta name="twitter:title" content="Explore Rust (Basic) & Revisiting gdb">
<meta name="twitter:description" content="\u2003How to debug a Rust program? $ gdb excutable Simple example:\nViewing a variable&rsquo;s address:\nFormatted output of p s:\n$17 = alloc::string::String { vec: alloc::vec::Vec&lt;u8, alloc::alloc::Global&gt; { buf: alloc::raw_vec::RawVec&lt;u8, alloc::alloc::Global&gt; { ptr: core::ptr::unique::Unique&lt;u8&gt; { pointer: core::ptr::non_null::NonNull&lt;u8&gt; { pointer: 0x5555555abb80 }, _marker: core::marker::PhantomData&lt;u8&gt; }, cap: alloc::raw_vec::Cap (16), alloc: alloc::alloc::Global }, len: 16 } } Key points: p &lt;variable&gt; p &amp;&lt;variable&gt; ptype &lt;variable&gt;\n"><style>
  :root {
     
    --zh-font-family: "Noto Serif SC";
     
     
     
    --code-font-family: Consolas, Menlo, Monaco, "Courier New", var(--zh-font-family), monospace;
    --article-font-family: "Noto Serif SC";
  }
</style>

<script>
  (function () {
    const customFont = document.createElement("link");
    customFont.href =
      "https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap";

    customFont.type = "text/css";
    customFont.rel = "stylesheet";

    document.head.appendChild(customFont);
  })();
</script>


<link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=IM+Fell+Double+Pica+SC&display=swap" rel="stylesheet">


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            localStorage.setItem(colorSchemeKey, "auto");
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/fyshx_avatar_hu_4b64fe58c612edf3.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🫧</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">fyshXplore</a></h1>
            <h2 class="site-description">Wait for it...</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://github.com/fyshxfish'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">
                    
                        <li id="i18n-switch">  
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                            <select name="language" title="language" onchange="window.location.href = this.selectedOptions[0].value">
                                
                                    <option value="http://fyshxfish.github.io/zh/" >中文</option>
                                
                                    <option value="http://fyshxfish.github.io/" selected>English</option>
                                
                            </select>
                        </li>
                    
                

                
            </ol>
        </li>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">&thinsp;Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#how-to-debug-a-rust-program">How to debug a Rust program?</a></li>
    <li><a href="#ownership-issues-with-dbg-when-outputting-debug-information">Ownership issues with <code>dbg!</code> when outputting debug information</a></li>
    <li><a href="#explore-with-gdb">Explore with gdb</a></li>
    <li><a href="#about-reference-to-vector">About: reference to vector</a></li>
    <li><a href="#a-question-how-to-make-a-vector-appear-to-store-multiple-types-of-data">A question: How to make a Vector appear to store multiple types of data?</a></li>
    <li><a href="#debugging-enums-with-gdb-and-using-history-variables-in-gdb-and-other-repls">Debugging enums with gdb and using history variables in gdb (and other REPLs)</a></li>
    <li><a href="#rust_backtrace-and-command-line-tips">RUST_BACKTRACE and command line tips</a></li>
    <li><a href="#fancy-technique-color-escape-sequences-in-rusts-println">Fancy technique: color escape sequences in Rust&rsquo;s <code>println</code></a></li>
    <li><a href="#difference-between-unwrap-and-expect-in-resultt-e">Difference between <code>unwrap</code> and <code>expect</code> in <code>Result&lt;T, E&gt;</code>:</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/xplore/" style="background-color: #92af88; color: #fff;">
                Xplore
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/explore-rust-basic-revisiting-gdb/">Explore Rust (Basic) &amp; Revisiting gdb</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 5, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    2 minute read
                </time>
            </div>
        
    </footer>
    

    
        <footer class="article-translations">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



            <div>
                
                    <a href="http://fyshxfish.github.io/zh/p/rust-%E5%9F%BA%E7%A1%80%E4%B8%8E-gdb-%E4%BD%BF%E7%94%A8%E6%8B%BE%E9%81%97/" class="link">中文</a>
                
            </div>
        </footer>
    
</div>

</header>

    <section class="article-content">
    
    
    <p> </p>
<h2 id="how-to-debug-a-rust-program"><a href="#how-to-debug-a-rust-program" class="header-anchor"></a>How to debug a Rust program?
</h2><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ gdb excutable
</span></span></code></pre></div><p>Simple example:</p>
<!-- ![gdb_debug](gdb_debug.png) -->
<img src="gdb_debug.png" alt="gdb_debug" style="zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);" />
<p>Viewing a variable&rsquo;s address:</p>
<img src="mem_check.png" alt="mem_check" style="zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);" />
<p>Formatted output of <code>p s</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#57606a">$</span><span style="color:#0550ae">17</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span>alloc::string::<span style="color:#6639ba">String</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>vec: <span style="color:#1f2328">alloc</span>::vec::<span style="color:#6639ba">Vec</span><span style="color:#0550ae">&lt;</span><span style="color:#cf222e">u8</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>alloc::alloc::Global<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>buf: <span style="color:#1f2328">alloc</span>::raw_vec::RawVec<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">u8</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>alloc::alloc::Global<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>ptr: <span style="color:#1f2328">core</span>::ptr::unique::Unique<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">u8</span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>pointer: <span style="color:#1f2328">core</span>::ptr::non_null::NonNull<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">u8</span><span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                    </span>pointer: <span style="color:#0550ae">0x5555555abb80</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span><span style="color:#1f2328">},</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">                </span>_marker: <span style="color:#1f2328">core</span>::marker::PhantomData<span style="color:#0550ae">&lt;</span><span style="color:#cf222e">u8</span><span style="color:#0550ae">&gt;</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#1f2328">},</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>cap: <span style="color:#1f2328">alloc</span>::raw_vec::Cap<span style="color:#fff"> </span><span style="color:#1f2328">(</span><span style="color:#0550ae">16</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span>alloc: <span style="color:#1f2328">alloc</span>::alloc::Global<span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">},</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>len: <span style="color:#0550ae">16</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><p>Key points: <code>p &lt;variable&gt;</code>  <code>p &amp;&lt;variable&gt;</code>  <code>ptype &lt;variable&gt;</code></p>
<h2 id="ownership-issues-with-dbg-when-outputting-debug-information"><a href="#ownership-issues-with-dbg-when-outputting-debug-information" class="header-anchor"></a>Ownership issues with <code>dbg!</code> when outputting debug information
</h2><p>Incorrect:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#6639ba">dbg!</span><span style="color:#1f2328">(</span>var<span style="color:#1f2328">);</span><span style="color:#fff">      </span><span style="color:#57606a">// move
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#6639ba">dbg!</span><span style="color:#1f2328">(</span>var<span style="color:#1f2328">);</span><span style="color:#fff">      </span><span style="color:#57606a">// invalid reference
</span></span></span></code></pre></div><p><code>dbg!</code> will take ownership of <code>var</code> (Move), so <code>var</code> can&rsquo;t be used again.</p>
<p>Correct:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#6639ba">dbg!</span><span style="color:#1f2328">(</span><span style="color:#0550ae">&amp;</span>var<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#57606a">// or
</span></span></span><span style="display:flex;"><span><span style="color:#57606a"></span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>new_var<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#6639ba">dbg!</span><span style="color:#1f2328">(</span>var<span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#6639ba">dbg!</span><span style="color:#1f2328">(</span><span style="color:#0550ae">&amp;</span>new_var<span style="color:#1f2328">);</span><span style="color:#fff"> </span><span style="color:#57606a">// if you want to
</span></span></span></code></pre></div><h2 id="explore-with-gdb"><a href="#explore-with-gdb" class="header-anchor"></a>Explore with gdb
</h2><p>For things you want to explore, use gdb, for example: [How is enum represented at a low level?] -&gt; Write a simple program, compile it to an executable, then use gdb, using <code>print var</code> <code>print &amp;var</code> <code>x/x &lt;addr&gt;</code> to explore.</p>
<h2 id="about-reference-to-vector"><a href="#about-reference-to-vector" class="header-anchor"></a>About: reference to vector
</h2><ul>
<li>
<p>An excerpt from ch08-01</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#57606a">/* CANNOT COMPILE */</span><span style="color:#fff">    
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span><span style="color:#cf222e">mut</span><span style="color:#fff"> </span>v<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#6639ba">vec!</span><span style="color:#1f2328">[</span><span style="color:#0550ae">1</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">2</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">3</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">4</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">5</span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>first<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>v<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>v<span style="color:#1f2328">.</span>push<span style="color:#1f2328">(</span><span style="color:#0550ae">6</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#6639ba">println!</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;The first element is: </span><span style="color:#0a3069">{first}</span><span style="color:#0a3069">&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span></code></pre></div><blockquote>
<p>The code in Listing 8-6 might look like it should work: <em><strong>why should a reference to the first element care about changes at the end of the vector?</strong></em> This error is due to the way vectors work: because vectors put the values next to each other in memory, adding a new element onto the end of the vector might <u>require allocating new memory and copying the old elements to the new space</u>, if there isn’t enough room to put all the elements next to each other where the vector is currently stored. In that case, the reference to the first element would be pointing to <u>deallocated memory</u>. The borrowing rules prevent programs from ending up in that situation.</p></blockquote>
</li>
</ul>
<h2 id="a-question-how-to-make-a-vector-appear-to-store-multiple-types-of-data"><a href="#a-question-how-to-make-a-vector-appear-to-store-multiple-types-of-data" class="header-anchor"></a>A question: How to make a Vector appear to store multiple types of data?
</h2><p>Answer: Have the Vector store enums. An enum can have variants of different types, so in a sense, the Vector can store multiple types of data.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#cf222e">fn</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>v: <span style="color:#6639ba">Vec</span><span style="color:#0550ae">&lt;</span>CellType<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#6639ba">vec!</span><span style="color:#1f2328">[</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CellType::Int<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CellType::Text<span style="color:#1f2328">(</span><span style="color:#6639ba">String</span>::from<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;word&#34;</span><span style="color:#1f2328">)),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CellType::Float<span style="color:#1f2328">(</span><span style="color:#0550ae">3.14</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>v1<span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>v<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">enum</span> <span style="color:#1f2328">CellType</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Int<span style="color:#1f2328">(</span><span style="color:#cf222e">i32</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Float<span style="color:#1f2328">(</span><span style="color:#cf222e">f64</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Text<span style="color:#1f2328">(</span><span style="color:#6639ba">String</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><h2 id="debugging-enums-with-gdb-and-using-history-variables-in-gdb-and-other-repls"><a href="#debugging-enums-with-gdb-and-using-history-variables-in-gdb-and-other-repls" class="header-anchor"></a>Debugging enums with gdb and using history variables in gdb (and other REPLs)
</h2><p><strong>Source code:</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#cf222e">fn</span> <span style="color:#6639ba">main</span><span style="color:#1f2328">(){</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>v: <span style="color:#6639ba">Vec</span><span style="color:#0550ae">&lt;</span>CellType<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#6639ba">vec!</span><span style="color:#1f2328">[</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CellType::Int<span style="color:#1f2328">(</span><span style="color:#0550ae">12</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>CellType::Float<span style="color:#1f2328">(</span><span style="color:#0550ae">3.14</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>v1: <span style="color:#cf222e">&amp;</span><span style="color:#1f2328">CellType</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>v<span style="color:#1f2328">[</span><span style="color:#0550ae">0</span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">let</span><span style="color:#fff"> </span>v2: <span style="color:#cf222e">&amp;</span><span style="color:#1f2328">CellType</span><span style="color:#fff"> </span><span style="color:#0550ae">=</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>v<span style="color:#1f2328">[</span><span style="color:#0550ae">1</span><span style="color:#1f2328">];</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#6639ba">println!</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;END&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">enum</span> <span style="color:#1f2328">CellType</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Int<span style="color:#1f2328">(</span><span style="color:#cf222e">i32</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span>Float<span style="color:#1f2328">(</span><span style="color:#cf222e">f64</span><span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div><p><strong>Debugging session:</strong></p>
<img src="gdb_enum.png" alt="gdb_enum" style="zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);" />
<ol>
<li><code>p v1</code>：Prints the value of <code>v1: &amp;CellType</code>, which is a pointer value, meaning the address where the associated data is stored on the heap. Note that the data corresponding to <code>v1, v2</code> each occupies 16 bytes.</li>
<li><code>x/4x $1</code>：Examines the 16 bytes pointed to by <code>v1</code>.</li>
<li><code>p *v1</code>：Dereferences <code>v1</code> to view the actual value stored at that memory location.</li>
</ol>
<ul>
<li>
<p>Analysis of how enum is actually stored in memory:</p>
</li>
<li>
<p>The first byte is likely the variant identifier, with the mapping: 0-Int 1-Float</p>
</li>
<li>
<p>Int: Associated data is stored in the second byte, <code>0x0000000c</code> represents <code>Int(12)</code> from the code</p>
</li>
<li>
<p>Float: Associated data is stored in the third and fourth bytes <code>0x40091eb8_51eb851f</code> which is the IEEE 754 64-bit representation of 3.14</p>
</li>
<li>
<p>Remaining question: Why are the associated data stored in different positions for these two variants, and what is 0x00005555 in Float?</p>
</li>
<li>
<p>Rediscovering gdb features (history variable)：</p>
  <!-- 今天我终于知道了 `p var` 打印出来的内容为什么前面有一个 `$x` ，原来是供用户后续复用的，过去半年的 gdb 都白用了。（今年计算机系统实验时手动复制内存地址的时候，觉得这个手动的操作一定有某种简化的方式，所以询问 gpt 在 gdb 有什么办法可以做类似 *bash* 里`echo $(ls)`这样的插值，gpt给的回答我都不满意，回头扫了一眼 gdb 终于意识到 `$1` 这个地方有点玄机，也是学到了） -->
<p>The <code>$x</code> in <code>p var</code> output is a <strong>history variable</strong> for later reuse. Similar REPL behaviors include bash&rsquo;s <code>echo $(ls)</code> and mit-scheme, which also provides referenceable history variables for returned procedures (though those variables are long and contain special characters like #[], so to truly reuse them you still need to copy the identifier and bind it to another identifier for reuse).</p>
</li>
</ul>
<h2 id="rust_backtrace-and-command-line-tips"><a href="#rust_backtrace-and-command-line-tips" class="header-anchor"></a>RUST_BACKTRACE and command line tips
</h2><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#953800">RUST_BACKTRACE</span><span style="color:#0550ae">=</span><span style="color:#0550ae">1</span> cargo run
</span></span><span style="display:flex;"><span>$ <span style="color:#953800">A</span><span style="color:#0550ae">=</span><span style="color:#0550ae">12</span> <span style="color:#953800">B</span><span style="color:#0550ae">=</span><span style="color:#0550ae">23</span> <span style="color:#6639ba">echo</span> <span style="color:#0a3069">&#34;</span><span style="color:#953800">$A</span><span style="color:#0a3069"> </span><span style="color:#953800">$B</span><span style="color:#0a3069">&#34;</span>
</span></span></code></pre></div><p>You can write temporary environment variables at the leftmost part of the command.</p>
<h2 id="fancy-technique-color-escape-sequences-in-rusts-println"><a href="#fancy-technique-color-escape-sequences-in-rusts-println" class="header-anchor"></a>Fancy technique: color escape sequences in Rust&rsquo;s <code>println</code>
</h2><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#6639ba">println!</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;</span><span style="color:#0a3069">\x1b</span><span style="color:#0a3069">[34mMESSAGE</span><span style="color:#0a3069">\x1b</span><span style="color:#0a3069">[0m&#34;</span><span style="color:#1f2328">);</span><span style="color:#fff">
</span></span></span></code></pre></div><ul>
<li>
<p>Using <code>\x1b[34m</code> for escape sequences</p>
</li>
<li>
<p>What is <code>\x1b</code>?</p>
<p><code>\x</code> indicates hexadecimal, <code>1b</code> is the ASCII hex code for ESC.</p>
  <img src="ascii.png" alt="ascii" style="zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);" />
</li>
</ul>
<h2 id="difference-between-unwrap-and-expect-in-resultt-e"><a href="#difference-between-unwrap-and-expect-in-resultt-e" class="header-anchor"></a>Difference between <code>unwrap</code> and <code>expect</code> in <code>Result&lt;T, E&gt;</code>:
</h2><p>Looking at library function implementations can give you a better understanding of pre-packaged functions. For example, with <code>Result&lt;T, E&gt;</code>&rsquo;s <code>unwrap</code> and <code>expect</code>, looking at the source code reveals that the difference is in the <code>msg</code> parameter of <code>unwrap_failed</code> (and <code>unwrap_failed</code> is just a wrapper around <code>panic!</code>):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#cf222e">impl</span><span style="color:#0550ae">&lt;</span>T<span style="color:#1f2328">,</span><span style="color:#fff"> </span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#6639ba">Result</span><span style="color:#0550ae">&lt;</span><span style="color:#6639ba">Result</span><span style="color:#0550ae">&lt;</span>T<span style="color:#1f2328">,</span><span style="color:#fff"> </span>E<span style="color:#0550ae">&gt;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>E<span style="color:#0550ae">&gt;</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">..</span><span style="color:#1f2328">.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">pub</span><span style="color:#fff"> </span><span style="color:#cf222e">fn</span> <span style="color:#6639ba">expect</span><span style="color:#1f2328">(</span><span style="color:#6a737d">self</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>msg: <span style="color:#cf222e">&amp;</span><span style="color:#cf222e">str</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>-&gt; <span style="color:#1f2328">T</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">where</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>E: <span style="color:#1f2328">fmt</span>::Debug<span style="color:#1f2328">,</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">match</span><span style="color:#fff"> </span><span style="color:#6a737d">self</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#6639ba">Ok</span><span style="color:#1f2328">(</span>t<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">=&gt;</span><span style="color:#fff"> </span>t<span style="color:#1f2328">,</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#6639ba">Err</span><span style="color:#1f2328">(</span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">=&gt;</span><span style="color:#fff"> </span>unwrap_failed<span style="color:#1f2328">(</span>msg<span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>e<span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">pub</span><span style="color:#fff"> </span><span style="color:#cf222e">fn</span> <span style="color:#6639ba">unwrap</span><span style="color:#1f2328">(</span><span style="color:#6a737d">self</span><span style="color:#1f2328">)</span><span style="color:#fff"> </span>-&gt; <span style="color:#1f2328">T</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#cf222e">where</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span>E: <span style="color:#1f2328">fmt</span>::Debug<span style="color:#1f2328">,</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#cf222e">match</span><span style="color:#fff"> </span><span style="color:#6a737d">self</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#6639ba">Ok</span><span style="color:#1f2328">(</span>t<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">=&gt;</span><span style="color:#fff"> </span>t<span style="color:#1f2328">,</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">            </span><span style="color:#6639ba">Err</span><span style="color:#1f2328">(</span>e<span style="color:#1f2328">)</span><span style="color:#fff"> </span><span style="color:#0550ae">=&gt;</span><span style="color:#fff"> </span>unwrap_failed<span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;called `Result::unwrap()` on an `Err` value&#34;</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span><span style="color:#0550ae">&amp;</span>e<span style="color:#1f2328">),</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">        </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#0550ae">..</span><span style="color:#1f2328">.</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#cf222e">fn</span> <span style="color:#6639ba">unwrap_failed</span><span style="color:#1f2328">(</span>msg: <span style="color:#cf222e">&amp;</span><span style="color:#cf222e">str</span><span style="color:#1f2328">,</span><span style="color:#fff"> </span>error: <span style="color:#cf222e">&amp;</span><span style="color:#1f2328">dyn</span><span style="color:#fff"> </span>fmt::Debug<span style="color:#1f2328">)</span><span style="color:#fff"> </span>-&gt; <span style="color:#0550ae">!</span><span style="color:#fff"> </span><span style="color:#1f2328">{</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff">    </span><span style="color:#6639ba">panic!</span><span style="color:#1f2328">(</span><span style="color:#0a3069">&#34;</span><span style="color:#0a3069">{msg}</span><span style="color:#0a3069">: </span><span style="color:#0a3069">{error:?}</span><span style="color:#0a3069">&#34;</span><span style="color:#1f2328">)</span><span style="color:#fff">
</span></span></span><span style="display:flex;"><span><span style="color:#fff"></span><span style="color:#1f2328">}</span><span style="color:#fff">
</span></span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/rust/">Rust</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI&#43;WdtXRGWt2kTvGFasHpSy3SV"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG&#43;vnGctmUb0ZY0l8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"integrity="sha384-&#43;VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4&#43;/RRE05"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body, {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 fyshXplore
    </section>
    
    <section class="powerby">
        
            Contact: hnu_yuxin@hnu.edu.cn <br/>
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.26.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

  
  
<script>
let currentIndex = 0;
const images = document.querySelectorAll('.image-container img');
const totalImages = images.length;


images[currentIndex].classList.add('active');

function moveSlide(step) {
    
    images[currentIndex].classList.remove('active');

    
    currentIndex = (currentIndex + step + totalImages) % totalImages;

    
    images[currentIndex].classList.add('active');
}
</script>
    

<script>
  
  const copyText = document.getElementById("copyText");
  const notification = document.getElementById("notification");

  
  copyText.addEventListener("click", function() {
    
    const tempInput = document.createElement("input");
    document.body.appendChild(tempInput);
    tempInput.value = copyText.innerText; 
    tempInput.select();
    document.execCommand("copy"); 
    document.body.removeChild(tempInput); 

    
    notification.classList.add("show");

    
    setTimeout(function() {
      notification.classList.remove("show");
    }, 2000);
  });
</script>
    </body>
</html>
