<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Lambda Calculus on fyshXplore</title>
        <link>http://fyshxfish.github.io/tags/lambda-calculus/</link>
        <description>Recent content in Lambda Calculus on fyshXplore</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en</language>
        <lastBuildDate>Sun, 02 Feb 2025 21:29:00 +0800</lastBuildDate><atom:link href="http://fyshxfish.github.io/tags/lambda-calculus/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Basic Lambda Calculus Programming (Solutions for game functional on Steam)</title>
        <link>http://fyshxfish.github.io/p/basic-lambda-calculus-programming-solutions-for-game-functional-on-steam/</link>
        <pubDate>Sun, 02 Feb 2025 21:29:00 +0800</pubDate>
        
        <guid>http://fyshxfish.github.io/p/basic-lambda-calculus-programming-solutions-for-game-functional-on-steam/</guid>
        <description>&lt;p&gt;Following problems come from &lt;em&gt;functional&lt;/em&gt;, available on Steam.&lt;/p&gt;
&lt;h2 id=&#34;basic&#34;&gt;&lt;a href=&#34;#basic&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Basic
&lt;/h2&gt;&lt;h3 id=&#34;anything&#34;&gt;&lt;a href=&#34;#anything&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;anything
&lt;/h3&gt;&lt;p&gt;Any term that conforms to Lambda Calculus syntax (1. variable 2. abstraction 3. application) is okay.&lt;/p&gt;
&lt;h3 id=&#34;identity&#34;&gt;&lt;a href=&#34;#identity&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;identity
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-lambda&#34; data-lang=&#34;lambda&#34;&gt;x: x
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;two-arguments&#34;&gt;&lt;a href=&#34;#two-arguments&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;two arguments
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x:y: y x
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;squaring&#34;&gt;&lt;a href=&#34;#squaring&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;squaring
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;f:x: f (f x) 
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;indirection&#34;&gt;&lt;a href=&#34;#indirection&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;indirection
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;f:x:y: f y x
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;boolean&#34;&gt;&lt;a href=&#34;#boolean&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Boolean
&lt;/h2&gt;&lt;p&gt;Definitions:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;TRUE = t:f: t
FALSE = t:f: f
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;if&#34;&gt;&lt;a href=&#34;#if&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;IF
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p:t:f: p t f
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Simple LC has no type system, so programmers need to ensure that &lt;code&gt;p&lt;/code&gt; can always evaluate to &lt;code&gt;TRUE&lt;/code&gt; / &lt;code&gt;FALSE&lt;/code&gt;, then &lt;code&gt;p t f&lt;/code&gt; further evaluates to &lt;code&gt;t&lt;/code&gt;/ &lt;code&gt;f&lt;/code&gt;. If &lt;code&gt;p&lt;/code&gt; cannot evaluate to &lt;code&gt;TRUE&lt;/code&gt; / &lt;code&gt;FALSE&lt;/code&gt;, then &lt;code&gt;p t f&lt;/code&gt; will be retained or produce unexpected evaluation behavior.&lt;/p&gt;
&lt;p&gt;One thing you can easily notice is: &lt;code&gt;IF P A B ‚â° P A B&lt;/code&gt;, you can completely omit &lt;code&gt;IF&lt;/code&gt; in all occasions where it&amp;rsquo;s used. This doesn&amp;rsquo;t change the semantics and can reduce one reduction, but for readability, there&amp;rsquo;s still reason to keep &lt;code&gt;IF&lt;/code&gt; in somewhat complex programs.&lt;/p&gt;
&lt;h3 id=&#34;not&#34;&gt;&lt;a href=&#34;#not&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;NOT
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;b: b FALSE TRUE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This looks subtly clever. It can be obtained straightforwardly through &lt;code&gt;b: IF b FALSE TRUE ‚Üí b FALSE TRUE&lt;/code&gt;, or directly by utilizing the meaning of &lt;code&gt;TRUE&lt;/code&gt; / &lt;code&gt;FALSE&lt;/code&gt; - selecting the first/second item.&lt;/p&gt;
&lt;h3 id=&#34;and&#34;&gt;&lt;a href=&#34;#and&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;AND
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p:q: p q p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If &lt;code&gt;p = TRUE&lt;/code&gt;, then &lt;code&gt;AND p q ‚â° q&lt;/code&gt;; if &lt;code&gt;p = FALSE&lt;/code&gt;, then &lt;code&gt;AND p q ‚â° FALSE ‚â° p&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;or&#34;&gt;&lt;a href=&#34;#or&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;OR
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p:q: p p q
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If &lt;code&gt;p = TRUE&lt;/code&gt;, then &lt;code&gt;OR p q ‚â° p ‚â° TRUE&lt;/code&gt;; if &lt;code&gt;p = FALSE&lt;/code&gt;, then &lt;code&gt;OR p q ‚â° q&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;xor&#34;&gt;&lt;a href=&#34;#xor&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;XOR
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p:q: p (NOT q) q
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Similar to &lt;code&gt;AND&lt;/code&gt;, &lt;code&gt;OR&lt;/code&gt;, you can draw a truth table to organize your thoughts.&lt;/p&gt;
&lt;h2 id=&#34;pair-and-list&#34;&gt;&lt;a href=&#34;#pair-and-list&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Pair and List
&lt;/h2&gt;&lt;h3 id=&#34;pair&#34;&gt;&lt;a href=&#34;#pair&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;PAIR
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;x:y:f: f x y
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;PAIR A B ‚Üí (x:y:f: f x y) A B ‚Üí (f: f A B)&lt;/code&gt; is an abstraction that: contains &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt; in order, waiting for a function &lt;code&gt;f&lt;/code&gt; to act on the contained &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt;. For example, when &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt; are Boolean, &lt;code&gt;f&lt;/code&gt; can be &lt;code&gt;AND&lt;/code&gt; / &lt;code&gt;OR&lt;/code&gt; / &amp;hellip; (of course, the syntax doesn&amp;rsquo;t restrict the shape of &lt;code&gt;f&lt;/code&gt;,&lt;code&gt;A&lt;/code&gt;,&lt;code&gt;B&lt;/code&gt;, if you want to write &lt;code&gt;PAIR TRUE 0 PAIR&lt;/code&gt; the interpreter won&amp;rsquo;t stop you)&lt;/p&gt;
&lt;h3 id=&#34;fst&#34;&gt;&lt;a href=&#34;#fst&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;FST
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p: p TRUE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;When &lt;code&gt;p = PAIR A B&lt;/code&gt;, &lt;code&gt;p TRUE ‚Üí (PAIR A B) TRUE ‚Üí (f: f A B) TRUE ‚Üí TRUE A B ‚Üí A&lt;/code&gt;. Note that &lt;code&gt;p&lt;/code&gt; is a function that can receive a parameter &lt;code&gt;f&lt;/code&gt;, here we make it receive the &lt;code&gt;TRUE&lt;/code&gt; function to select the first element. In LC, &lt;code&gt;TRUE&lt;/code&gt; / &lt;code&gt;FALSE&lt;/code&gt; are more appropriately interpreted as &lt;strong&gt;selecting&lt;/strong&gt; the first/second item that follows, rather than expressing the truth/falsity of a proposition. This is meaningful because when we write programs in other high-level languages, if we need a Boolean value &lt;code&gt;X&lt;/code&gt;, &lt;code&gt;X&lt;/code&gt;&amp;rsquo;s ultimate utility is often in the &lt;strong&gt;selection&lt;/strong&gt; of &lt;code&gt;then-clause&lt;/code&gt; / &lt;code&gt;else-clause&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;snd&#34;&gt;&lt;a href=&#34;#snd&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;SND
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;p: p FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Similar to &lt;code&gt;FST&lt;/code&gt;.&lt;/p&gt;
&lt;h3 id=&#34;simple-list&#34;&gt;&lt;a href=&#34;#simple-list&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;simple list
&lt;/h3&gt;&lt;p&gt;Get the 3rd item from the list (1-indexed):&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;l: FST ( SND ( SND l ) )
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;A list is a simple recursive structure. The recursive base is an empty list, represented here by &lt;code&gt;FALSE&lt;/code&gt;. The recursive step is adding elements to a list, implemented here using &lt;code&gt;PAIR&lt;/code&gt;. e.g. &lt;code&gt;[] ‚Ü¶ FALSE&lt;/code&gt;, &lt;code&gt;1 ‚Ü¶ (PAIR 1 FALSE)&lt;/code&gt;, &lt;code&gt;[1,3] ‚Ü¶ (PAIR 1 (PAIR 3 FALSE))&lt;/code&gt;. &lt;span style=&#34;color: gray&#34;&gt;Note in the &lt;code&gt;[1,3]&lt;/code&gt; example, if viewed from the perspective of &lt;strong&gt;adding elements to a list&lt;/strong&gt;, the head is the item closest to &lt;code&gt;FALSE&lt;/code&gt;, the closer to &lt;code&gt;FALSE&lt;/code&gt;, the smaller the index, because it was added earlier. Under this interpretation, &lt;code&gt;[1,3] ‚Ü¶ (PAIR 3 (PAIR 1 FALSE))&lt;/code&gt;.&lt;/span&gt; However, the game doesn&amp;rsquo;t adopt this interpretation, but maintains visual alignment with familiar &lt;code&gt;[a,b,..]&lt;/code&gt;, making the most recently added item - the leftmost item - the head. Keep this in mind when dealing with ascending/descending order problems later.&lt;/p&gt;
&lt;h3 id=&#34;any&#34;&gt;&lt;a href=&#34;#any&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ANY
&lt;/h3&gt;&lt;p&gt;For a list containing 3 Boolean values, return &lt;code&gt;TRUE&lt;/code&gt; if any item is &lt;code&gt;TRUE&lt;/code&gt;, otherwise return &lt;code&gt;FALSE&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(l: IF 
  (OR 
    (FST (SND (SND l))) 
    (OR 
      (FST l) 
      (FST (SND l))
    )
  )
  TRUE FALSE
)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Just write according to logic straightforwardly. Here the list has fixed length, which is easy to deal with. Variable-length lists would require recursion, see later.&lt;/p&gt;
&lt;h3 id=&#34;push&#34;&gt;&lt;a href=&#34;#push&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;PUSH
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(m:l: PAIR m l)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Use &lt;code&gt;PUSH&lt;/code&gt; to add new item &lt;code&gt;m&lt;/code&gt; to list &lt;code&gt;l&lt;/code&gt;. According to Œ∑-reduction, &lt;code&gt;PUSH ‚â° PAIR&lt;/code&gt;, so writing &lt;code&gt;PAIR&lt;/code&gt; directly is sufficient here.&lt;/p&gt;
&lt;h3 id=&#34;pop&#34;&gt;&lt;a href=&#34;#pop&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;POP
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SND
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Pop out the outermost / leftmost item.&lt;/p&gt;
&lt;h3 id=&#34;empty&#34;&gt;&lt;a href=&#34;#empty&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;EMPTY
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;l: l (t:x:y: FALSE) TRUE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;First, &lt;code&gt;EMPTY&lt;/code&gt; needs to receive a list, so its basic shape is &lt;code&gt;EMPTY = l: ...&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Consider case &lt;code&gt;l&#39; = FALSE&lt;/code&gt;, &lt;code&gt;EMPTY l&#39; ~expected‚Üí TRUE&lt;/code&gt;. Using &lt;code&gt;FALSE&lt;/code&gt;&amp;rsquo;s selection ability, we make &lt;code&gt;EMPTY = l: l ùïè TRUE&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Consider case &lt;code&gt;l* = PAIR a (PAIR b (...)) = (f: f a (PAIR b (...))) ‚âà (f: f a _tail)&lt;/code&gt;, viewing &lt;code&gt;l*&lt;/code&gt; as a function receiving one parameter, &lt;code&gt;EMPTY l* = (f: f a _tail) ùïè TRUE ‚Üí ùïè a _tail TRUE ~expected‚Üí FALSE&lt;/code&gt;. Then &lt;code&gt;ùïè&lt;/code&gt;&amp;rsquo;s job is to receive the following 3 items and return &lt;code&gt;FALSE&lt;/code&gt;, so &lt;code&gt;ùïè = (t:x:y: FALSE)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Combining all above gives the final solution &lt;code&gt;EMPTY = l: l (t:x:y: FALSE) TRUE&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;recursion&#34;&gt;&lt;a href=&#34;#recursion&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Recursion
&lt;/h2&gt;&lt;h3 id=&#34;create-recursion---y-combinator&#34;&gt;&lt;a href=&#34;#create-recursion---y-combinator&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;create recursion - Y combinator
&lt;/h3&gt;&lt;h4 id=&#34;motivation-recursion-in-lc&#34;&gt;&lt;a href=&#34;#motivation-recursion-in-lc&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Motivation: Recursion in LC
&lt;/h4&gt;&lt;p&gt;Try to define recursive factorial function in LC:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;f = a: IF (EQ a 1)
     1
     (a * f (a - 1))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;The above definition doesn&amp;rsquo;t conform to LC syntax because LC functions are anonymous functions and don&amp;rsquo;t support calling functions by name (like &lt;code&gt;f&lt;/code&gt; above). Yet recursive functions inevitably need self-reference. How to solve this problem?&lt;/p&gt;
&lt;p&gt;Applying function $F$ to parameter $A$ can be expressed as $F A$, or using higher-order functions like this: $(\lambda fa.\ f\ a) F A$. Building on this, add some logic, like expressing &amp;ldquo;with parameters $a$ and $p$, function $f$, if $p\ a$ is true, return $f\ a$, otherwise return $a$ itself&amp;rdquo;: $(\lambda fap.\ IF\ (p\ a)\ (f\ a)\ a)$. Based on this idea, assuming our target factorial function is &lt;code&gt;F&lt;/code&gt;, then &lt;code&gt;F&lt;/code&gt; satisfies this equation, denoting &lt;code&gt;(f:a: ..)&lt;/code&gt; as &lt;code&gt;F&#39;&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;F = (f:a: IF (EQ a 1)
      1 
      (a * f (a - 1))
  )  F 
  ‚â° F&amp;#39; F 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Looking at the right side of the equation, &lt;code&gt;F&#39;&lt;/code&gt;&amp;rsquo;s meaning is to receive function &lt;code&gt;f&lt;/code&gt; and parameter &lt;code&gt;a&lt;/code&gt;, if &lt;code&gt;EQ a 1&lt;/code&gt; return &lt;code&gt;1&lt;/code&gt;, otherwise return &lt;code&gt;a * f (a - 1)&lt;/code&gt;. Passing recursive function &lt;code&gt;F&lt;/code&gt; to &lt;code&gt;F&#39;&lt;/code&gt;, the behavior of resulting function &lt;code&gt;F&#39; F&lt;/code&gt; matches our target factorial function &lt;code&gt;F&lt;/code&gt;, semantically making both sides equal.&lt;/p&gt;
&lt;p&gt;Currently we have equation &lt;code&gt;F = F&#39; F&lt;/code&gt; ‚ë†, where &lt;code&gt;F&#39;&lt;/code&gt; is a known closed term. Since &lt;code&gt;F&lt;/code&gt; involves self-reference, no normal form exists, so consider if there exists some &lt;code&gt;Y&lt;/code&gt; s.t. &lt;code&gt;Y F&#39; = F&lt;/code&gt; ‚ë°. Substituting ‚ë° into ‚ë†, we get &lt;code&gt;Y F&#39; = F&#39; (Y F&#39;)&lt;/code&gt;. The next goal is to solve for &lt;code&gt;Y&lt;/code&gt;&amp;rsquo;s normal form. Once we get &lt;code&gt;Y&lt;/code&gt;, target recursive function &lt;code&gt;F = Y F&#39;&lt;/code&gt; follows.&lt;/p&gt;
&lt;span style=&#34;color: gray&#34;&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Why try to decompose &lt;code&gt;F&lt;/code&gt; into &lt;code&gt;Y F&#39;&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;Speaking loosely, from equation perspective &lt;code&gt;F = F&#39; F&lt;/code&gt; has only one unknown &lt;code&gt;F&lt;/code&gt;. Transforming &lt;code&gt;F&lt;/code&gt; to &lt;code&gt;Y F&#39;&lt;/code&gt; similarly contains only one unknown &lt;code&gt;Y&lt;/code&gt;, while &lt;code&gt;F&#39;&lt;/code&gt; is known and closely related to our solution target (recursive function &lt;code&gt;F&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/span&gt;
&lt;h4 id=&#34;designing-the-y-combinator&#34;&gt;&lt;a href=&#34;#designing-the-y-combinator&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Designing the Y Combinator
&lt;/h4&gt;&lt;p&gt;&lt;code&gt;Y&lt;/code&gt; is a term that satisfies: &lt;code&gt;Y F = F (Y F) = F (F (Y F)) = ...&lt;/code&gt;. (Note: How/When the term expands depends on the evaluaton strategy.)&lt;/p&gt;
&lt;p&gt;To design &lt;code&gt;Y&lt;/code&gt; that meets the above requirements, let&amp;rsquo;s analyze:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Y&lt;/code&gt; must be of the form &lt;code&gt;(f: ...)&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Self-reference in &lt;code&gt;Y&lt;/code&gt;? ‚Äî We need to repeat &lt;code&gt;Y&lt;/code&gt;, or &lt;strong&gt;construct&lt;/strong&gt; the right-side &lt;code&gt;Y&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Function/Abstraction is All You Need ‚Äî Since LC has no storage, in &lt;code&gt;Y F = F (Y F)&lt;/code&gt;, the &lt;code&gt;Y&lt;/code&gt;s on both sides aren&amp;rsquo;t the same instance. They&amp;rsquo;re not value or address copies (LC has no storage concept). The right-side &lt;code&gt;Y&lt;/code&gt; needs to be constructed, being &lt;strong&gt;equal under alpha-conversion&lt;/strong&gt; to the left-side &lt;code&gt;Y&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;How to repeat &lt;code&gt;F&lt;/code&gt;? Simple - &lt;code&gt;Y = (f: ...)&lt;/code&gt; receives parameter &lt;code&gt;F&lt;/code&gt;, and within &lt;code&gt;Y&lt;/code&gt;&amp;rsquo;s body, we can repeat it as needed.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Design an abstraction &lt;code&gt;M&lt;/code&gt; for construction. &lt;code&gt;M&lt;/code&gt; will receive necessary parameters and organize them to form a structure identical to &lt;code&gt;Y&lt;/code&gt;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;Y = f: M f ...&lt;/code&gt; ~·¥áx·¥ò·¥á·¥Ñ·¥õ·¥á·¥Ö‚Üí &lt;code&gt;M = f: f (Wai f)&lt;/code&gt;: &lt;code&gt;M&lt;/code&gt; needs &lt;code&gt;Y&lt;/code&gt;&amp;rsquo;s parameter &lt;code&gt;f&lt;/code&gt; and must build structure matching &lt;code&gt;Y F&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Y = f: M f M ...&lt;/code&gt; ~·¥áx·¥ò·¥á·¥Ñ·¥õ·¥á·¥Ö‚Üí &lt;code&gt;M = f:m: f (m f m)&lt;/code&gt;: Since we want &lt;code&gt;M&lt;/code&gt; to match &lt;code&gt;Y F&lt;/code&gt;&amp;rsquo;s structure, and &lt;code&gt;Y&lt;/code&gt; contains &lt;code&gt;M&lt;/code&gt;, &lt;code&gt;M&lt;/code&gt; must contain &lt;code&gt;M&lt;/code&gt; too, passed via parameter &lt;code&gt;m&lt;/code&gt;. In &lt;code&gt;M&lt;/code&gt;&amp;rsquo;s body, leftmost &lt;code&gt;f&lt;/code&gt; implements &lt;code&gt;f&lt;/code&gt;&amp;rsquo;s reapplication, &lt;code&gt;(m f m)&lt;/code&gt; constructs structure alpha-equivalent to left-side &lt;code&gt;Y F&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Y = f: M f M, where M = f:m: f (m f m)&lt;/code&gt; is a valid Y combinator, verifiable by &lt;code&gt;Y F = M F M = (f:m: f (m f m)) F M = F (M F M) = F (M F M) = F (Y F)&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;There are countless Y combinators, like (a) &lt;code&gt;Y = f: M M f, M = m:f: f (m m f)&lt;/code&gt; - similar but more concise via Œ∑-reduction to &lt;code&gt;Y = M M, M = ...&lt;/code&gt;, as given by Turing; (b) &lt;code&gt;Y = f: E (E f) E f, E = r:s:f: f (s r s f)&lt;/code&gt; works too but less elegant; (c) most concise &lt;code&gt;Y = f: (x: f (x x)) (x: f (x x))&lt;/code&gt; which differs by not containing combinator sub-terms.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Exercise: How to implement combinator &lt;code&gt;D&lt;/code&gt; satisfying &lt;code&gt;D F D = D (D F D) D = ...&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;One solution: &lt;code&gt;D = f:d: d (d f d) d&lt;/code&gt;, following similar principles.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Must &lt;code&gt;Y&lt;/code&gt; be a combinator? Can it have free variables?&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;Y&lt;/code&gt; had free variable &lt;code&gt;z&lt;/code&gt;, constructing &lt;code&gt;Y&lt;/code&gt; with &lt;code&gt;M&lt;/code&gt; must consider &lt;code&gt;z&lt;/code&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;closed &lt;code&gt;M&lt;/code&gt;: Pass &lt;code&gt;z&lt;/code&gt; as parameter giving &lt;code&gt;Y = f: M f c M, M = f:c:m: f (m f c m)&lt;/code&gt; - works but adds unnecessary complexity;&lt;/li&gt;
&lt;li&gt;open &lt;code&gt;M&lt;/code&gt;: If &lt;code&gt;M&lt;/code&gt; contains free &lt;code&gt;z&lt;/code&gt;, like &lt;code&gt;Y = f: K f K z, K = f:k: f (k f k z)&lt;/code&gt;, it fails producing: &lt;code&gt;Y F = F (K F K z) z = F (Y F) z = F (F (Y F) z) z&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Conclusion: Possible but pointless. Intuitively, arbitrary free variables serve no purpose.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;using-the-y-combinator&#34;&gt;&lt;a href=&#34;#using-the-y-combinator&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Using the Y combinator
&lt;/h4&gt;&lt;p&gt;Following the motivation section, we use &lt;code&gt;F&#39; = f:a: ...&lt;/code&gt; to express the application logic between recursive function &lt;code&gt;f&lt;/code&gt; and its parameter &lt;code&gt;a&lt;/code&gt;. With target recursive function &lt;code&gt;F&lt;/code&gt;, we have &lt;code&gt;F = F&#39; F&lt;/code&gt;. Since self-reference is invalid, we consider using &lt;code&gt;Y F&#39;&lt;/code&gt; to represent &lt;code&gt;F&lt;/code&gt;. In the previous section we derived a viable &lt;code&gt;Y&lt;/code&gt;, so &lt;code&gt;F = Y F&#39;&lt;/code&gt; gives us our desired target function.&lt;/p&gt;
&lt;p&gt;The problems in this section become straightforward once you understand the Y combinator. Key points to note:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;When using previously defined functions, pay attention to parameter order. For example, &lt;code&gt;FILTER&lt;/code&gt; takes the list first, then the filtering function. Since Simple LC has few syntax constraints, programmers need to be extra careful;&lt;/li&gt;
&lt;li&gt;Several problems may involve list reversal, so write &lt;code&gt;REVERSE&lt;/code&gt; first and reuse it;&lt;/li&gt;
&lt;li&gt;Watch your bracket matching - write in an advanced editor first to avoid basic errors, then copy the code into the game for evaluation. The answers below pass evaluation but may not be the most concise.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;strip-prefix&#34;&gt;&lt;a href=&#34;#strip-prefix&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;strip prefix
&lt;/h3&gt;&lt;p&gt;Remove &lt;code&gt;FALSE&lt;/code&gt; prefix from variable length list:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:l:
    IF 
    (FST l)
    l 
    (f (SND l))
    )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;acc&#34;&gt;&lt;a href=&#34;#acc&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ACC
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y  (a:l:f:i: 
    IF (EMPTY l)
    i 
    (a (SND l) f (f i (FST l))) 
    )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;all&#34;&gt;&lt;a href=&#34;#all&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ALL
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;l: ACC l AND TRUE
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;reverse&#34;&gt;&lt;a href=&#34;#reverse&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;REVERSE
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (i:c:l: 
    IF 
    (EMPTY l) 
    c 
    (i (PAIR (FST l) c) (SND l))
    ) 
    FALSE 
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;map&#34;&gt;&lt;a href=&#34;#map&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;MAP
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y  (m:c:l:f:
        IF 
        (EMPTY l)
        (REVERSE c)
        (m (PAIR (f (FST l)) c)  (SND l) f) 
    )
FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;none&#34;&gt;&lt;a href=&#34;#none&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;NONE
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(l: ALL (MAP l NOT))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;filter&#34;&gt;&lt;a href=&#34;#filter&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;FILTER
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (m:c:l:f:
        IF 
        (EMPTY l)
        (REVERSE c)
        (   IF 
        (f (FST l))
        (m (PAIR (FST l) c) (SND l) f) 
        (m c (SND l) f)
        )
    )
    FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;zip&#34;&gt;&lt;a href=&#34;#zip&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ZIP
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (z:c:m:n:
    IF 
    (EMPTY m)
    (REVERSE c)    
    (z (PAIR (PAIR (FST m) (FST n)) c) (SND m) (SND n)) 
    ) 
    FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;eqblist&#34;&gt;&lt;a href=&#34;#eqblist&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;EQBLIST
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(m:n: ALL 
    (MAP 
        (MAP 
        (ZIP m n) 
        (p: XOR (FST p) (SND p))
        ) 
        NOT
    ) 
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;concat&#34;&gt;&lt;a href=&#34;#concat&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;CONCAT
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(m:n: 
    (Y (g:c:r:
        IF (EMPTY r)
        c
        (g (PAIR (FST r) c) (SND r))
        )
    )
    n (REVERSE m) 
)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;numerals&#34;&gt;&lt;a href=&#34;#numerals&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Numerals
&lt;/h2&gt;&lt;p&gt;Church Numerals use functions to express natural numbers. Two key points are: 1. base (&lt;code&gt;0 := f:x: x&lt;/code&gt;) 2. successor (&lt;code&gt;SUC&lt;/code&gt;). By repeatedly applying successor to the base, we can obtain all Church Numerals.&lt;/p&gt;
&lt;h3 id=&#34;suc&#34;&gt;&lt;a href=&#34;#suc&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;SUC
&lt;/h3&gt;&lt;p&gt;Given Church Numeral &lt;code&gt;n&lt;/code&gt;, &lt;code&gt;n&lt;/code&gt; is a function that takes parameters &lt;code&gt;f&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt;, where &lt;code&gt;n f x&lt;/code&gt; means applying &lt;code&gt;f&lt;/code&gt; to &lt;code&gt;x&lt;/code&gt; $n$ times. &lt;code&gt;SUC n&lt;/code&gt; is a function that takes &lt;code&gt;f&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt; and applies &lt;code&gt;f&lt;/code&gt; to &lt;code&gt;x&lt;/code&gt; $(n+1)$ times.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(n: (f:x: f (n f x) ) )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;zero&#34;&gt;&lt;a href=&#34;#zero&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ZERO
&lt;/h3&gt;&lt;p&gt;Use logical operations to determine if given &lt;code&gt;n&lt;/code&gt; is &lt;code&gt;(f:x: x)&lt;/code&gt;.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(n: n (x: AND FALSE x) TRUE)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;pre&#34;&gt;&lt;a href=&#34;#pre&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;PRE
&lt;/h3&gt;&lt;p&gt;A basic observation is &lt;code&gt;n = n SUC 0&lt;/code&gt;, where equality means intensional equality. So iterating on &lt;code&gt;PAIR 0 0&lt;/code&gt; $n$ times, where each iteration: 1. aligns right number with left 2. increments left number, means right number always lags left by one step. After $n$ iterations, left number is &lt;code&gt;n&lt;/code&gt;, right number is its predecessor.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(n: SND (n (p: PAIR (SUC (FST p)) (FST p)) (PAIR 0 0) ) )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;add&#34;&gt;&lt;a href=&#34;#add&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;ADD
&lt;/h3&gt;&lt;p&gt;Given &lt;code&gt;x&lt;/code&gt;, &lt;code&gt;y&lt;/code&gt;, the goal is &lt;code&gt;x+y&lt;/code&gt;, meaning: ready to receive &lt;code&gt;f&lt;/code&gt;, &lt;code&gt;z&lt;/code&gt;, apply &lt;code&gt;f&lt;/code&gt; to &lt;code&gt;z&lt;/code&gt; $(x+y)$ times. First apply &lt;code&gt;f&lt;/code&gt; to &lt;code&gt;z&lt;/code&gt; $x$ times getting &lt;code&gt;x f z&lt;/code&gt;, then apply &lt;code&gt;f&lt;/code&gt; to &lt;code&gt;(x f z)&lt;/code&gt; $y$ times.&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y: (f:z: y f (x f z)) )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;sub&#34;&gt;&lt;a href=&#34;#sub&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;SUB
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y: (f:z: (y PRE x) f z))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;mul&#34;&gt;&lt;a href=&#34;#mul&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;MUL
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y:f:z: y (x f) z )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;div&#34;&gt;&lt;a href=&#34;#div&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;DIV
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(Y (d:c:x:y:
    IF (ZERO x)
    0    
    ( 
      IF (ZERO (y PRE x))
      (SUC c)
      (d (SUC c) (y PRE x) y)
    ) 
   ) 
) 0
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;eq&#34;&gt;&lt;a href=&#34;#eq&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;EQ
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y: AND 
    (ZERO (x PRE y)) 
    (ZERO (y PRE x))
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;min&#34;&gt;&lt;a href=&#34;#min&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;MIN
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y: IF (ZERO (x PRE y))
      y
      x
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;max&#34;&gt;&lt;a href=&#34;#max&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;MAX
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(x:y: IF (ZERO (x PRE y))
      x
      y
)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;more-numerals&#34;&gt;&lt;a href=&#34;#more-numerals&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;More Numerals
&lt;/h2&gt;&lt;h3 id=&#34;is-odd&#34;&gt;&lt;a href=&#34;#is-odd&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;is odd
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(n: (n NOT FALSE))
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;As a side note, here&amp;rsquo;s a recursive method for checking odd/even numbers (looks interesting, fresher than familiar &lt;code&gt;mod 2&lt;/code&gt;):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isEven&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bool&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isEven&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;True&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isEven&lt;/span&gt; x &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; isOdd &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;x&lt;span style=&#34;color:#0550ae&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isOdd&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isOdd&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;False&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;isOdd&lt;/span&gt; x &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; isEven &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;x&lt;span style=&#34;color:#0550ae&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;increasing-list&#34;&gt;&lt;a href=&#34;#increasing-list&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;increasing list
&lt;/h3&gt;&lt;p&gt;Tail recursive:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(Y (f:c:n: IF (ZERO n)
           (PAIR 0 c)
           (f (PAIR n c) (PRE n))
   ) 
) FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Non-tail recursive:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(n: REVERSE 
    ( 
     (Y (f:x: 
            IF (ZERO x)
            (PAIR 0 FALSE)
            (PAIR x (f (PRE x))))
     ) n
    )
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;decomposition&#34;&gt;&lt;a href=&#34;#decomposition&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;decomposition
&lt;/h3&gt;&lt;p&gt;Decompose given number into sum of powers of 2:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(Y (f:c:k:n:
     IF (ZERO n)
     c
     (IF (AND (EQ n (MIN k n)) (NOT (EQ k n)))  
         (f c (DIV k 2) n)
         (f (PAIR k c) (DIV k 2) (SUB n k) )
     )
   )
) FALSE 8
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;*&lt;/strong&gt; primes and sort both need significant runtime (local tests show around 30min each level)&lt;/p&gt;
&lt;h3 id=&#34;primes&#34;&gt;&lt;a href=&#34;#primes&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;primes
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:l:p:n: 
     IF (EQ n (FST p)) 
     (PAIR n l)
     (IF (EQ (FST p) (MAX n (FST p)))
      (f l (SND p) n)
      ( IF (
            (Y (f:n:p:
                IF (EQ n (MIN n p) )
                (IF (EQ n p) TRUE FALSE )
                (f (SUB n p) p)   
               )
            ) n (FST p)
           )
        (f (PAIR (FST p) l) p (DIV n (FST p)))
        (f l (SND p) n)
      )
     )
  )
  FALSE
  (PAIR 47 (PAIR 43 (PAIR 41 (PAIR 37 (PAIR 31 (PAIR 29 
  (PAIR 23 (PAIR 19 (PAIR 17 (PAIR 13 (PAIR 11 (PAIR 7 
  (PAIR 3  (PAIR 2 FALSE))))))))))))))
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;sort&#34;&gt;&lt;a href=&#34;#sort&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;sort
&lt;/h3&gt;&lt;p&gt;Selection sort:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:c:l: 
    IF (EMPTY l)
    c
    (
        (m: (f (PAIR m c) (FILTER l (x: NOT (EQ x m)) )) ) 
        (ACC l MAX 0)
    )
  ) FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;trees&#34;&gt;&lt;a href=&#34;#trees&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;trees
&lt;/h2&gt;&lt;h3 id=&#34;node&#34;&gt;&lt;a href=&#34;#node&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;NODE
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;l:v:r:f: f l v r
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;lef&#34;&gt;&lt;a href=&#34;#lef&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;LEF
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t: t (l:v:r: l) 
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;rig&#34;&gt;&lt;a href=&#34;#rig&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;RIG
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t: t (l:v:r: r)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;val&#34;&gt;&lt;a href=&#34;#val&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;VAL
&lt;/h3&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t: t (l:v:r: v)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;bempty&#34;&gt;&lt;a href=&#34;#bempty&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;BEMPTY
&lt;/h3&gt;&lt;p&gt;Similar to checking empty list. Non-empty trees have the form of &lt;code&gt;NODE l v r = f: f l v r&lt;/code&gt;,and empty tree is represented by &lt;code&gt;FALSE := a:b: b&lt;/code&gt;. Using a tree &lt;code&gt;t&lt;/code&gt; as a function: if empty tree, &lt;code&gt;t A B = FALSE A B = B ~·¥áx·¥ò·¥á·¥Ñ·¥õ·¥á·¥Ö‚Üí TRUE&lt;/code&gt;, if non-empty &lt;code&gt;t A B = (f: f l v r) A B = A l v r B ~·¥áx·¥ò·¥á·¥Ñ·¥õ·¥á·¥Ö‚Üí FALSE&lt;/code&gt;. Thus with &lt;code&gt;B = TRUE, A = l:v:r:x: FALSE&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(t: t (l:v:r:x: FALSE) TRUE )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;find&#34;&gt;&lt;a href=&#34;#find&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;FIND
&lt;/h3&gt;&lt;p&gt;Check if tree &lt;code&gt;t&lt;/code&gt; contains node with value &lt;code&gt;v&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:t:v:
    IF (BEMPTY t)
    FALSE
    (IF (EQ (VAL t) v)
     TRUE
     (OR (f (LEF t) v) (f (RIG t) v))    
    )
  )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;bsize&#34;&gt;&lt;a href=&#34;#bsize&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;BSIZE
&lt;/h3&gt;&lt;p&gt;Calculate tree size:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:t:
    IF (BEMPTY t)
    0
    (SUC (ADD (f (LEF t)) (f (RIG t))))
  )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;build&#34;&gt;&lt;a href=&#34;#build&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;BUILD
&lt;/h3&gt;&lt;p&gt;Binary search tree construction:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:c:l:
    IF (EMPTY l)
    c
    (   f
        (
          (
          Y (f:v:t:
              IF (BEMPTY t)
              (NODE FALSE v FALSE)
              ( IF (EQ v (MIN v (VAL t)))
                (NODE (f v (LEF t)) (VAL t) (RIG t))
                (NODE (LEF t) (VAL t) (f v (RIG t)))
              )
            )
          )           
          (FST l) c)
        (SND l)
    ) 
  ) FALSE
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;[ Seems like PREORDER and INORDER functions are swapped in the game? ]&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;preorder&#34;&gt;&lt;a href=&#34;#preorder&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;PREORDER
&lt;/h3&gt;&lt;p&gt;Inorder traversal of binary tree:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:t: 
    IF (BEMPTY t)
    FALSE
    (CONCAT (f (LEF t))
        (PUSH (VAL t)  
              (f (RIG t))
        )
    )
  )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;inorder&#34;&gt;&lt;a href=&#34;#inorder&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;INORDER
&lt;/h3&gt;&lt;p&gt;Preorder traversal of binary tree:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:t: 
    IF (BEMPTY t)
    FALSE
    (PUSH (VAL t)
        (CONCAT (f (LEF t)) 
                (f (RIG t))
        )
    )
  )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;split&#34;&gt;&lt;a href=&#34;#split&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;SPLIT
&lt;/h3&gt;&lt;p&gt;Split tree &lt;code&gt;t&lt;/code&gt; using value &lt;code&gt;v&lt;/code&gt; as boundary:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Y (f:t:v:
    IF (BEMPTY t)
    (PAIR FALSE FALSE)
    (
      IF (EQ v (MAX v (VAL t)))
      (
        (p: PAIR (NODE (LEF t) (VAL t) (FST p)) (SND p)) 
        (f (RIG t) v)
      )
      (
        (p: (PAIR (FST p) (NODE (SND p) (VAL t) (RIG t) ))) 
        (f (LEF t) v)
      )
    )
  )
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;kth&#34;&gt;&lt;a href=&#34;#kth&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;KTH
&lt;/h3&gt;&lt;p&gt;Find kth largest element in given binary search tree by getting kth item from inorder traversal list:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;(t:k: 
    Y (f:c:l:
        IF (EQ c 0)
        (FST l)
        (f (PRE c) (SND l) )
    ) k (PREORDER t)
)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;inverse-6&#34;&gt;&lt;a href=&#34;#inverse-6&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;inverse 6
&lt;/h3&gt;&lt;p&gt;For given binary search tree &lt;code&gt;t&lt;/code&gt;, find missing numbers from &lt;code&gt;[1..6]&lt;/code&gt; in ascending order:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t: 
  IF (BEMPTY t)
  (PAIR 1 (PAIR 2 (PAIR 3 (PAIR 4 (PAIR 5 (PAIR 6 FALSE))))))
  (
   Y (f:c:m:n:
        IF (EMPTY n)
        (REVERSE c)
        (
          IF (EQ (FST m) (FST n))
          (f c (SND m) (SND n))
          (f (PAIR (FST n) c) m (SND n))
        )
    ) 
    FALSE
    (PREORDER t)
    (PAIR 1 (PAIR 2 (PAIR 3 (PAIR 4 (PAIR 5 (PAIR 6 FALSE))))))
  )
&lt;/code&gt;&lt;/pre&gt;&lt;hr&gt;
</description>
        </item>
        <item>
        <title>The Construction of the Iteration Combinator - LCaC ¬ß 4C, Theorem 4.20</title>
        <link>http://fyshxfish.github.io/p/the-construction-of-the-iteration-combinator-lcac-4c-theorem-4.20/</link>
        <pubDate>Tue, 17 Sep 2024 23:48:00 +0800</pubDate>
        
        <guid>http://fyshxfish.github.io/p/the-construction-of-the-iteration-combinator-lcac-4c-theorem-4.20/</guid>
        <description>&lt;p&gt;This blog post provides supplementary material for the proof section of &lt;em&gt;Lambda-Calculus and Combinator ¬ß 4C Theorem 4.20&lt;/em&gt;, the overall intention of the proof is to prove that total recursive functions conforming to Definition 4.18 can be represented using combinators. Here we briefly explain the key part of this proof - the construction of the iteration combinator. This can also be understood as: &lt;strong&gt;Writing an iterative program with specific termination conditions in Pure Lambda Calculus.&lt;/strong&gt;&lt;/p&gt;
&lt;!-- If you&#39;re curious about &#34;how to write an iteration/recursive function with a specified **number of iterations/recursions** in Lambda Calculus&#34;, you can refer to the construction of the $R_{\text{Bernays}}$ combinator in the proof of Lambda-Calculus and Combinators ¬ß 4B Theorem 4.11, which is also quite ingenious. --&gt;
&lt;p&gt;Recursion and Iteration: In constructing the $R_{\text{Bernays}}$ recursive combinator, to solve for the value $\phi(n)$ of some recursive function $\phi$, one feasible method is to start from $\phi(0)$ and iterate $n$ times to get $\phi(n)$ (roughly as follows: denoting the recursive step update function as $\chi$, $\phi(n) = \chi^n \phi(0)$). Iteration and recursion differ in forward versus reverse direction. The &amp;ldquo;recursion&amp;rdquo; in this article aims to describe the structural characteristic of &amp;ldquo;&lt;strong&gt;self-calling&lt;/strong&gt;&amp;rdquo;, while the central focus is on solving iteration problems ($0 \rightarrow 1 \rightarrow &amp;hellip; \rightarrow n$).&lt;/p&gt;
&lt;h2 id=&#34;construction-goal&#34;&gt;&lt;a href=&#34;#construction-goal&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Construction Goal
&lt;/h2&gt;&lt;p&gt;Assuming we have a check function $X$, with iteration termination condition $XY=_{\beta,w}\bar{0}$, we want to construct a combinator $P$ to obtain the minimal $Y$ satisfying the termination condition. Starting from $Y = \bar{0}$, check if $(XY) =_{\beta,w} \bar{0}$. If the condition is met, return this $Y$, otherwise continue checking $X(\bar{\sigma}Y)$. We want to construct a combinator $P$ to automate this checking process. Formally, we expect $P$ to behave as follows:&lt;/p&gt;
&lt;p&gt;$$ PXY =_{\beta,w}Y \quad \text{, if } XY = _{\beta,w}\bar{0};$$&lt;/p&gt;
&lt;p&gt;$$ PXY =_{\beta,w}PX(\bar{\sigma}Y), \text{    otherwise} $$&lt;/p&gt;
&lt;p&gt;Fully respecting expectations, write a $P$ combinator: $\textcolor{red}{P} \equiv \lambda xy.\textbf{D}y(\textcolor{red}{P}x(\bar{\sigma}y))(xy)$, where $\textbf{D}=\lambda xyz.z(\textbf{K}y)x$. We can use the $\textbf{Y}$ combinator to fix this $P$ ($P \equiv \textbf{Y}(\lambda pxy.\textbf{D}y(px(\bar{\sigma}y))(xy))$). The $P$ solved using the $\textbf{Y}$ combinator has no normal form. We won&amp;rsquo;t use this $P$ here; instead, we&amp;rsquo;ll try to construct a $P$ combinator with normal.&lt;/p&gt;
&lt;h2 id=&#34;construction-process&#34;&gt;&lt;a href=&#34;#construction-process&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Construction Process
&lt;/h2&gt;&lt;h3 id=&#34;basic-structure&#34;&gt;&lt;a href=&#34;#basic-structure&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Basic Structure
&lt;/h3&gt;&lt;p&gt;Express the existing $P$ in high-level language pseudocode:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;combinator p(x,y):            // L1: define p
    if (xy == 0):
        return const(y)                     
    else:
        return p(x, œÉ y)       // L5: call p
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Recursive $\lambda$, like $P \equiv \lambda x. MPN$, matches our experience in high-level language programming but doesn&amp;rsquo;t conform to Lambda Calculus rules, as Lambda Calculus&amp;rsquo;s inductive definition of $\lambda$-terms doesn&amp;rsquo;t include rules for assigning identifiers to abstractions. We write identifiers like $P$ only to improve readability and clarify expression structure, not to define recursive functions through identifier reuse like in high-level languages. A detail worth noting is that the symbol we see in books for recording identifiers for $\lambda$-terms is $\equiv$ rather than $=$.&lt;/p&gt;
&lt;p&gt;The fact that we can&amp;rsquo;t define recursion through identifier reuse doesn&amp;rsquo;t mean we can&amp;rsquo;t define recursion at all - we just need to rely on &lt;strong&gt;an additional layer of abstraction&lt;/strong&gt; to construct something that is formally non-recursive but effectively recursive.&lt;/p&gt;
&lt;p&gt;From a high-level programming perspective, if we want to replace the call to &lt;code&gt;p&lt;/code&gt; itself in L5, we can modify our code as follows. For consistency between branches, we design a function list &lt;code&gt;t&lt;/code&gt; where two functions correspond to two branches - function &lt;code&gt;getCurrentY&lt;/code&gt; will return the current &lt;code&gt;y&lt;/code&gt; value, and &lt;code&gt;recursion_p&lt;/code&gt; will handle recursion: (Let&amp;rsquo;s not worry about specific function structure and parameter design/passing yet, we&amp;rsquo;ll figure that out later, here we only care about the overall structure)&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;t = [getCurrentY, recursion_p]      // list of functions

combinator p(x,y):            
    if (xy == 0):
        return t[0]                     
    else:
        return t[1]    
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;How do we express this code in Lambda Calculus? To focus on our current level of abstraction, let&amp;rsquo;s first simplify the structure of $P \equiv \lambda xy.\textbf{D}y(Px(\bar{\sigma}y))(xy)$ to $P \equiv \lambda xy.\textbf{D}AB(xy)$&lt;/p&gt;
&lt;p&gt;Based on expectations/above pseudocode, we can write out the rough $\lambda$ framework as follows:&lt;/p&gt;
&lt;p&gt;$$ P \equiv \lambda xy. T(xy)[params] $$
$$ T \equiv \textbf{D}AB $$
$$ A \equiv \lambda [params]. \dots$$
$$ B \equiv \lambda [params]. &amp;hellip;$$&lt;/p&gt;
&lt;p&gt;Now $PXY = _{\beta,w} T(XY) $, $ XY = _{\beta, w} \bar{0} \longrightarrow PXY = A; XY \neq _{\beta, w} \bar{0} \longrightarrow PXY = B  $ .&lt;/p&gt;
&lt;p&gt;We expect to put &lt;strong&gt;branch-specific logic&lt;/strong&gt; in $T$, and put &lt;strong&gt;branch selection&lt;/strong&gt; and branch function parameter passing in $P$.&lt;/p&gt;
&lt;h3 id=&#34;specific-details&#34;&gt;&lt;a href=&#34;#specific-details&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Specific Details
&lt;/h3&gt;&lt;p&gt;We ignored many details above, now it&amp;rsquo;s time to consider them :)&lt;/p&gt;
&lt;p&gt;First note a fact: putting branch function parameter passing work in $P$ means that regardless of which branch the current $P$&amp;rsquo;s $(xy)$ will lead to, our parameter list must be consistent / can &lt;strong&gt;only&lt;/strong&gt; be consistent. Since the case corresponding to $(xy) = _{\beta,w}\bar{0}$ is simpler, only needing to return the current $y$, we&amp;rsquo;ll consider it later and focus on the $(xy) \neq _{\beta,w}\bar{0}$ case first, letting the former accommodate the latter (since both branches relate to $y$, the parameter list must include $y$ - this is a commonality between branches; moreover, we can even pass all parameters corresponding to both branch functions, then in specific implementations of $A$,$B$ not bind parameters irrelevant to that branch).&lt;/p&gt;
&lt;h4 id=&#34;constructing-the-recursive-iterative-branch&#34;&gt;&lt;a href=&#34;#constructing-the-recursive-iterative-branch&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Constructing the Recursive (Iterative) Branch
&lt;/h4&gt;&lt;p&gt;Goal: $XY \neq _{\beta, w} \bar{0} \longrightarrow PXY = B \xlongequal{\text{expected}} PX(\bar{\sigma}Y) $. We want the &lt;u&gt;$\lambda$-term resulting from applying function $\underline{B}$ with $[\underline{params}]$ passed in $\underline{P}$&lt;/u&gt; to have the &lt;strong&gt;same structure&lt;/strong&gt; as $\underline{PXY}$ (note this is &lt;strong&gt;not&lt;/strong&gt; that $B$ and $P$ abstractions themselves having the same structure), just with $Y$ replaced by $(\bar{\sigma}Y)$. To get the same structure as $P$, the simplest method is to pass $P$&amp;rsquo;s existing components as $[params]$ to $B$ (and also to $A$), then reassemble these components in $B$ to form $P$&amp;rsquo;s structure:&lt;/p&gt;
&lt;p&gt;$$ P \equiv \lambda xy. T(xy)Txy $$
$$ T \equiv \textbf{D}AB $$
$$ A \equiv \lambda tuv. \dots$$
$$ B \equiv \lambda tuv. q(uv) $$&lt;/p&gt;
&lt;p&gt;($ T \mapsto t, x \mapsto u, y \mapsto v$)&lt;/p&gt;
&lt;p&gt;Due to $[params]$ passing, $P$&amp;rsquo;s structure has changed, so we need to synchronize $B$ with the new $P$ structure; additionally, we need to change the passed-in $y$ (bound by $v$) to $\bar{\sigma}y$ inside $B$:&lt;/p&gt;
&lt;p&gt;$$ P \equiv \lambda xy. T(xy)Txy $$
$$ T \equiv \textbf{D}AB $$
$$ A \equiv \lambda tuv. \dots$$
$$ B \equiv \lambda tuv. q(u(\bar{\sigma}v))qu(\bar{\sigma}v) $$&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s check: when $XY \neq _{\beta, w} \bar{0}$:&lt;/p&gt;
&lt;p&gt;$ \quad PXY $&lt;/br&gt;
$ = _{\beta,w} T(XY)TXY $ &lt;/br&gt;
$ = _{\beta,w} BTXY $&lt;/br&gt;
$ = _{\beta,w} T(X(\bar{\sigma}Y))TX(\bar{\sigma}Y) $&lt;/br&gt;
$ = _{\beta,w} PX(\bar{\sigma}Y) $ &lt;/br&gt;&lt;/p&gt;
&lt;p&gt;This matches our expectations, completing the iteration branch construction.&lt;/p&gt;
&lt;h4 id=&#34;constructing-the-iteration-termination-branch&#34;&gt;&lt;a href=&#34;#constructing-the-iteration-termination-branch&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Constructing the Iteration Termination Branch
&lt;/h4&gt;&lt;p&gt;Goal: $XY = _{\beta, w} \bar{0} \longrightarrow PXY = A \xlongequal{\text{expected}} Y $. During $B$&amp;rsquo;s construction, our existing parameter list is $ t \mapsto T, u \mapsto x, v \mapsto y$. In $A$, we just need to extract $y$, so $A = \lambda tuv.v$. If you want to stay consistent with Definition 4.8&amp;rsquo;s notation, then $A = \Pi^3_3$.&lt;/p&gt;
&lt;h4 id=&#34;complete-lambda&#34;&gt;&lt;a href=&#34;#complete-lambda&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Complete $\lambda$
&lt;/h4&gt;&lt;p&gt;$$ P \equiv \lambda xy. T(xy)Txy $$
$$ T \equiv \textbf{D}AB $$
$$ A \equiv \lambda tuv. v (= _{\beta,w} \Pi^3_3) $$
$$ B \equiv \lambda tuv. q(u(\bar{\sigma}v))qu(\bar{\sigma}v) $$&lt;/p&gt;
&lt;h4 id=&#34;brief-note-on-p-in-lcac-theorem-420&#34;&gt;&lt;a href=&#34;#brief-note-on-p-in-lcac-theorem-420&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Brief Note on $P$ in LCaC Theorem 4.20
&lt;/h4&gt;&lt;p&gt;The definition of $P$ given in LCaC Theorem 4.20 is:&lt;/p&gt;
&lt;p&gt;$$ T \equiv \lambda x.\textbf{D}\bar{0}(\lambda uv.u(x(\bar{\sigma}v))u(\bar{\sigma}v)) $$
$$ P \equiv \lambda xy.Tx(xy)(Tx)y $$&lt;/p&gt;
&lt;p&gt;Rewritten in format consistent with above:&lt;/p&gt;
&lt;p&gt;$$ P \equiv \lambda xy.Tx(xy)(Tx)y $$
$$ T \equiv \lambda x.\textbf{D}AB $$
$$ A \equiv \bar{0} $$
$$ B \equiv \lambda uv.u(x(\bar{\sigma}v))u(\bar{\sigma}v) $$&lt;/p&gt;
&lt;p&gt;Treating $(Tx)$ as a whole at times makes the expression more concise, while letting $x$ and $T$ have a binding relationship ($T \equiv \lambda x&amp;hellip;.$) - still allowing separate use of $x$ inside $T$; the closure of $(Tx)$ in $P$ makes the parameter passing form $B(Tx)y$ - rather than $BTxy$ - making $A$&amp;rsquo;s design more concise with $A \equiv \bar{0}$.&lt;/p&gt;
&lt;p&gt;Though there are slight differences in details, the overall structure is consistent with the $P$ given in this article.&lt;/p&gt;
&lt;h2 id=&#34;other&#34;&gt;&lt;a href=&#34;#other&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Other
&lt;/h2&gt;&lt;p&gt;Try expanding the above $P$:&lt;/p&gt;
&lt;p&gt;$$ \lambda xy.\lambda x.\textbf{D}\bar{0}(\lambda uv.u(x(\bar{\sigma}v))u(\bar{\sigma}v))x(xy)(\lambda x.\textbf{D}\bar{0}(\lambda uv.u(x(\bar{\sigma}v))u(\bar{\sigma}v))x)y$$&lt;/p&gt;
&lt;p&gt;If you&amp;rsquo;re willing to expand all of these too:&lt;/br&gt;
$ \textbf{D} = _{\beta, w} \lambda xyz.z(\textbf{K}y)x, \quad \textbf{K} = _{\beta, w} \lambda xy.x $ &lt;/br&gt;
$ \bar{0} = _{\beta, w} \lambda xy.y $ &lt;/br&gt;
$ \bar{\sigma} = _{\beta, w} \lambda nfz. f (n f z)$ &lt;/br&gt;&lt;/p&gt;
&lt;p&gt;$$ \lambda xy.\lambda x.(\lambda xyz.z((\lambda xy.x)y)x)(\lambda xy.y)(\lambda uv.u(x(\lambda nfz. f (n f z)))u(\lambda nfz. f (n f z)))x(xy)(\lambda x.(\lambda xyz.z((\lambda xy.x)y)x)(\lambda xy.y)(\lambda uv.u(x(\lambda nfz. f (n f z)))u(\lambda nfz. f (n f z)))x)y$$&lt;/p&gt;
&lt;p&gt;We can say that we&amp;rsquo;ve completed the construction of an iterative program using this pile of symbols + Pure Lambda Calculus computation rules - &lt;mark&gt;Programming in Pure Lambda Calculus.&lt;/mark&gt;, great!&lt;/p&gt;
&lt;hr&gt;
</description>
        </item>
        <item>
        <title>Church Encoding Note</title>
        <link>http://fyshxfish.github.io/p/church-encoding-note/</link>
        <pubDate>Sun, 08 Sep 2024 20:13:00 +0800</pubDate>
        
        <guid>http://fyshxfish.github.io/p/church-encoding-note/</guid>
        <description>&lt;h2 id=&#34;motivation-abstraction-level-up&#34;&gt;&lt;a href=&#34;#motivation-abstraction-level-up&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Motivation: Abstraction Level Up!
&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Apply &lt;code&gt;square&lt;/code&gt; 3 times to &lt;code&gt;2&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;=&amp;gt; &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#57606a&#34;&gt;;Value: 256&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;2&lt;/code&gt; ‚Üí &lt;code&gt;x&lt;/code&gt;: Apply &lt;code&gt;square&lt;/code&gt; 3 times to some number &lt;code&gt;x&lt;/code&gt;, use &lt;code&gt;lambda&lt;/code&gt; to abstract &lt;code&gt;2&lt;/code&gt; to &lt;code&gt;x&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;square3&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;square&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;square&lt;/code&gt; ‚Üí &lt;code&gt;f&lt;/code&gt;: Apply some function &lt;code&gt;f&lt;/code&gt; 3 times to some value &lt;code&gt;x&lt;/code&gt;, similarly, use &lt;code&gt;lambda&lt;/code&gt; to abstract &lt;code&gt;square&lt;/code&gt; to &lt;code&gt;f&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;three_times_f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;$3 ‚Üí i$ : Apply some function &lt;code&gt;f&lt;/code&gt; to value &lt;code&gt;x&lt;/code&gt; for $i$ times $(i \in \mathbb{N})$&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;$i=0$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;zero_time_f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;$i=1$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;one_time_f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;$i=2$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;two_times_f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recursive definition of $i$ applications&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Base case:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;zero_time_f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recursive step:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;succ&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;z&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recursively solve for $i$ applications corresponding to $i$:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;church&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;i&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;if &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;= &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#953800&#34;&gt;zero_time_f&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;succ&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;church&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;- &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;i&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;     
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This is the &lt;mark&gt;Church Encoding&lt;/mark&gt; corresponding to natural number $i$.&lt;/p&gt;
&lt;p&gt;A simple test in REPL: Apply &lt;code&gt;cube&lt;/code&gt; 2 times to &lt;code&gt;3&lt;/code&gt; $((3^3)^3=19683)$&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 ]=&amp;gt; (church 2)
;Value: #[compound-procedure 15]

1 ]=&amp;gt; ( #[compound-procedure 15] cube 3)
;Value: 19683
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;understanding-church-encoding&#34;&gt;&lt;a href=&#34;#understanding-church-encoding&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Understanding Church Encoding
&lt;/h2&gt;&lt;p&gt;Church Encoding is &lt;strong&gt;&lt;span style=&#34;color: darkred;&#34;&gt;NOT&lt;/span&gt;&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Numbers that target to be stored in physical memory or represented in bits&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Designed for arithmetic operations (like $3.14 √ó 2.17$)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Church Encoding is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;An &lt;strong&gt;abstraction&lt;/strong&gt; of &lt;strong&gt;counting&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Church Encoding is an abstraction of the counting process. In the context of Lambda Calculus, the three rules for inductively defining $Œª-terms$ involve $atom$, $abstraction$, and $application$. Church Encoding can be understood as: given an initial $term$ and an $abstraction$, we want to apply this $abstraction$ to the $atom$ &lt;strong&gt;multiple times&lt;/strong&gt; ($apply$). We use a higher-level $abstraction$ to abstract the process of counting these &amp;ldquo;&lt;strong&gt;multiple times&lt;/strong&gt;&amp;rdquo;, and this layer of abstraction for the counting process is Church Encoding.&lt;/p&gt;
&lt;h2 id=&#34;church-encoding-in-scheme&#34;&gt;&lt;a href=&#34;#church-encoding-in-scheme&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Church Encoding in Scheme
&lt;/h2&gt;&lt;p&gt;$zeroÔºöŒªf.Œªx.x$&lt;/p&gt;
&lt;p&gt;Applying any $abstraction$ 0 times to a $term$ returns the original $term$.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;zero&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;$oneÔºöŒªf.Œªx.(f‚Äâx)$&lt;/br&gt;
$twoÔºöŒªf.Œªx.(f‚Äâ(f‚Äâx))$&lt;/br&gt;
$three: Œªf.Œªx.(f‚Äâ(f‚Äâ(f‚Äâx)))$&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;one&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;two&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;thr&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;When writing &lt;code&gt;thr&lt;/code&gt;, we notice the recursive structure. The base case is clearly &lt;code&gt;zero&lt;/code&gt;, and the recursive step &lt;code&gt;succ&lt;/code&gt; is as follows:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scm&#34; data-lang=&#34;scm&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;succ&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;z&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;f&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;application-examples&#34;&gt;&lt;a href=&#34;#application-examples&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Application Examples
&lt;/h2&gt;&lt;p&gt;Church Encoding is an abstraction of counting. If we want to square (&lt;code&gt;square&lt;/code&gt;) the number &lt;code&gt;2&lt;/code&gt; three times: $((2^2)^2)^2=256$&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 ]=&amp;gt; (thr square 2)
;Value: 256
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Verify the correctness of &lt;code&gt;succ&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;1 ]=&amp;gt; (succ (succ (succ zero)))
;Value: #[compound-procedure 17]

1 ]=&amp;gt; (#[compound-procedure 17] square 2)
;Value: 256
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;references&#34;&gt;&lt;a href=&#34;#references&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;References
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a class=&#34;link&#34; href=&#34;https://en.wikipedia.org/wiki/Church_encoding&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Church Encoding wiki&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Types and Programming Languages, Chapter 5 The Untyped Lambda-Calculus&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A &lt;a class=&#34;link&#34; href=&#34;https://www.zhihu.com/question/39930042/answer/2415190431?utm_psn=1816166240617631745&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Zhihu answer&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
</description>
        </item>
        <item>
        <title>Huffman Trees in Haskell | Structure and Destructure of Compound Data</title>
        <link>http://fyshxfish.github.io/p/huffman-trees-in-haskell-structure-and-destructure-of-compound-data/</link>
        <pubDate>Mon, 02 Sep 2024 01:53:00 +0800</pubDate>
        
        <guid>http://fyshxfish.github.io/p/huffman-trees-in-haskell-structure-and-destructure-of-compound-data/</guid>
        <description>&lt;p&gt;Code Here: &lt;a class=&#34;link&#34; href=&#34;https://github.com/fyshxfish/sicp-playground/blob/main/sicp-note/ch2/ch2-3-huffman_tree.hs&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Huffman Tree in Haskell&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;haskell-implementation-of-huffman-trees&#34;&gt;&lt;a href=&#34;#haskell-implementation-of-huffman-trees&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Haskell Implementation of Huffman Trees
&lt;/h2&gt;&lt;img src=&#34;huffmantree_more_padding.png&#34; alt=&#34;huffmantree diagram&#34; style=&#34;zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);&#34; /&gt;
&lt;h3 id=&#34;data-abstraction&#34;&gt;&lt;a href=&#34;#data-abstraction&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Data Abstraction
&lt;/h3&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-haskell&#34; data-lang=&#34;haskell&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Weight&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Symbol&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;A&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;B&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;C&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;D&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;E&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;F&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;G&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;H&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;deriving&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Show&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Empty&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; a &lt;span style=&#34;color:#cf222e&#34;&gt;Weight&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Weight&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                    &lt;span style=&#34;color:#cf222e&#34;&gt;deriving&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Show&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;symbol--weight--leaf&#34;&gt;&lt;a href=&#34;#symbol--weight--leaf&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;&lt;code&gt;Symbol&lt;/code&gt; + &lt;code&gt;Weight&lt;/code&gt; ‚Üí &lt;code&gt;Leaf&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;We encode symbols (&lt;code&gt;Symbol&lt;/code&gt; / generic &lt;code&gt;a&lt;/code&gt;) based on their frequency/weight (&lt;code&gt;Weight&lt;/code&gt;), combining these two pieces of information into a &lt;code&gt;Leaf&lt;/code&gt; abstraction, corresponding to SICP&amp;rsquo;s (&lt;code&gt;define (make-leaf symbol weight) (list &#39;leaf symbol weight)&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Generic types and constraints: There are no type constraints on symbols. The weight constraint is that &lt;code&gt;Weight&lt;/code&gt; belongs to the &lt;code&gt;Ord&lt;/code&gt; typeclass because weights need to be comparable. Here we directly use &lt;code&gt;Int&lt;/code&gt; as the weight type instead of making it generic.&lt;/p&gt;
&lt;h4 id=&#34;recursive-definition-of--huffmantree&#34;&gt;&lt;a href=&#34;#recursive-definition-of--huffmantree&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Recursive Definition of  &lt;code&gt;HuffmanTree&lt;/code&gt;
&lt;/h4&gt;&lt;p&gt;Contains three constructors: &lt;code&gt;Empty&lt;/code&gt;, &lt;code&gt;Leaf&lt;/code&gt;, and &lt;code&gt;Node&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Empty&lt;/code&gt;: Empty tree&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Leaf&lt;/code&gt;: Leaf node containing symbol &lt;code&gt;a&lt;/code&gt; and weight &lt;code&gt;Weight&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Node&lt;/code&gt;: Branch node containing left and right subtrees (&lt;code&gt;HuffmanTree a&lt;/code&gt;), union of subtree symbols &lt;code&gt;[a]&lt;/code&gt;, and total subtree weight &lt;code&gt;Weight&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;building-the-huffman-tree&#34;&gt;&lt;a href=&#34;#building-the-huffman-tree&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Building the Huffman Tree
&lt;/h3&gt;&lt;h4 id=&#34;getting-weight&#34;&gt;&lt;a href=&#34;#getting-weight&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Getting Weight
&lt;/h4&gt;&lt;p&gt;Get the weight of &lt;code&gt;Leaf&lt;/code&gt;Ôºå&lt;code&gt;Node&lt;/code&gt; through pattern matching.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getWeight&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Weight&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getWeight&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; w 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getWeight&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; w
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight-paragraph-grey&#34;&gt;For simplicity, we haven&#39;t considered the `Empty` tree case. For better safety, we should write `getWeight :: HuffmanTree a -&gt; Maybe Weight`, returning `Nothing` when matching `Empty`.&lt;/div&gt;&lt;br&gt;
&lt;h4 id=&#34;list-organization&#34;&gt;&lt;a href=&#34;#list-organization&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;List Organization
&lt;/h4&gt;&lt;p&gt;The starting point for building a Huffman tree is an ordered list of leaves. During construction, the &lt;code&gt;[HuffmanTree a]&lt;/code&gt; list needs to maintain order. The functions in this section aim to organize an unordered list into an ordered one.&lt;/p&gt;
&lt;p&gt;¬ª &lt;code&gt;adjoinLeaf&lt;/code&gt;: Insert a HuffmanTree a into an existing ordered &lt;code&gt;[HuffmanTree a]&lt;/code&gt; based on weight (ascending order).&lt;/p&gt;
&lt;p&gt;¬ª &lt;code&gt;initLeafs&lt;/code&gt;: Organize an existing unordered leaf list into an ordered leaf list.&lt;/p&gt;
&lt;p&gt;¬ª &lt;code&gt;moveFirstNode&lt;/code&gt;: During Huffman Tree construction, the Merge operation combines the two HuffmanTree (&lt;code&gt;Leaf&lt;/code&gt; / &lt;code&gt;Node&lt;/code&gt;) with smallest weights‚Äîthe first two elements in the list‚Äîinto a new Node. This function helps reposition the newly generated Node after merging.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;adjoinTree&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a  &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;adjoinTree&lt;/span&gt; t &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;t&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;adjoinTree&lt;/span&gt; t &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;t&amp;#39;&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ts&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; w &lt;span style=&#34;color:#0550ae&#34;&gt;&amp;lt;&lt;/span&gt; w&amp;#39;   &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; t&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; t&amp;#39;&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; ts 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; otherwise &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; t&amp;#39;&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;adjoinTree t ts&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#cf222e&#34;&gt;where&lt;/span&gt; w  &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; getWeight t 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;          w&amp;#39; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; getWeight t&amp;#39; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;initLeafs&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;     &lt;span style=&#34;color:#57606a&#34;&gt;-- I know pl(leaf) = leaves, btw. ^^   &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;initLeafs&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;initLeafs&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;p&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ps&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; adjoinLeaf p &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;initLeafs ps&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;moveFirstNode&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;moveFirstNode&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;t&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ts&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; adjoinLeaf t ts 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;tree-construction&#34;&gt;&lt;a href=&#34;#tree-construction&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Tree Construction
&lt;/h4&gt;&lt;p&gt;¬ª &lt;code&gt;makeNode&lt;/code&gt;: Combines two &lt;code&gt;HuffmanTree&lt;/code&gt;s into a &lt;code&gt;Node&lt;/code&gt;.
¬ª &lt;code&gt;constructHuffTree&lt;/code&gt;: Bottom-up tree construction, building the Huffman Tree using tail recursion.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Recursive step: Merge the first two elements in the current list into a parent &lt;code&gt;Node&lt;/code&gt; using &lt;code&gt;makeNode&lt;/code&gt;, move the parent node to get a new ordered list, and recursively process the new list.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Base case: List contains only one element, which is the root node.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;¬ª &lt;code&gt;initAndConstructHuffTree&lt;/code&gt;: Final encapsulation, using Point-less composition to combine leaf list initialization initLeafs and tree construction constructHuffTree.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;makeNode&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;makeNode&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s1 w1&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s2 w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s1 w1&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s2 w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;s1&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; s2&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;w1 &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;makeNode&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l r ss w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l r ss w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;s&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ss&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;w &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;makeNode&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l r ss w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;  &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l r ss w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s w&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;ss &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;s&lt;span style=&#34;color:#1f2328&#34;&gt;])&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;w &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; w&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;makeNode&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l1 r1 ss1 w1&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l2 r2 ss2 w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l1 r1 ss1 w1&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; l2 r2 ss2 w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;ss1 &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; ss2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;w1 &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; w2&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Empty&lt;/span&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;t&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; t      
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;x&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;y&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ts&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; constructHuffTree &lt;span style=&#34;color:#0550ae&#34;&gt;$&lt;/span&gt; moveFirstNode &lt;span style=&#34;color:#0550ae&#34;&gt;$&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;makeNode x y&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; ts
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;initAndConstructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;initAndConstructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; constructHuffTree &lt;span style=&#34;color:#0550ae&#34;&gt;.&lt;/span&gt; initLeafs 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;huffman-tree-encoding-and-decoding&#34;&gt;&lt;a href=&#34;#huffman-tree-encoding-and-decoding&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Huffman Tree Encoding and Decoding
&lt;/h3&gt;&lt;h4 id=&#34;getting-symbol-encoding&#34;&gt;&lt;a href=&#34;#getting-symbol-encoding&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Getting Symbol Encoding
&lt;/h4&gt;&lt;p&gt;The process of building a Huffman tree is the encoding process itself. A node&amp;rsquo;s position in the tree represents its encoding. Here we present the encoding in binary form.&lt;/p&gt;
&lt;p&gt;Encoding representation:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bit&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;L&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;R&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;deriving&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Show&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;type&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Bit&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;L&lt;/code&gt; corresponds to binary &lt;code&gt;0&lt;/code&gt;, &lt;code&gt;R&lt;/code&gt; corresponds to binary &lt;code&gt;1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Getting the encoding involves traversing and recording the Huffman tree:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[(&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s1 &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s2 &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[(&lt;/span&gt;s1&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;]),&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;s2&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s&amp;#39; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; node &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[(&lt;/span&gt;s&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; getCode&amp;#39; node &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;rec&lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; node &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s&amp;#39; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt;  getCode&amp;#39; node &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;rec&lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[(&lt;/span&gt;s&amp;#39;&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; nodel noder  &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; rec &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; getCode&amp;#39; nodel &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;rec&lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt; getCode&amp;#39; noder &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;rec&lt;span style=&#34;color:#0550ae&#34;&gt;++&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[(&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getCode&lt;/span&gt; t  &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; getCode&amp;#39; t &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;¬ª &lt;code&gt;getCode&#39;&lt;/code&gt;: Traverse the Huffman tree Recursively&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Recursive step: For a node, match left and right subtrees, continue recursive traversal for non-leaf nodes (&lt;code&gt;node&lt;/code&gt;), recording branch directions in &lt;code&gt;rec&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Base case: When matching a &lt;code&gt;Leaf&lt;/code&gt; in left/right subtree, it indicates reaching a &lt;code&gt;Symbol&lt;/code&gt;. At this point, &lt;code&gt;rec ++ [L]&lt;/code&gt; / &lt;code&gt;rec ++ [R]&lt;/code&gt; is the encoding for that &lt;code&gt;Symbol&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Pattern matching explanation: Reviewing the Huffman tree construction process, we always merge two nodes into their parent node, so there&amp;rsquo;s no case where a subtree is &lt;code&gt;Empty&lt;/code&gt;. Therefore, every branch node&amp;rsquo;s pattern is &lt;code&gt;Node lhs rhs _ _&lt;/code&gt;. Also, we use &lt;code&gt;Leaf&lt;/code&gt; as the base case without recursing on it, which is why we only pattern match different forms of the &lt;code&gt;Node&lt;/code&gt; constructor and put the &lt;code&gt;Leaf&lt;/code&gt; recursive base cases first.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;¬ª &lt;code&gt;getCode&lt;/code&gt;ÔºöWraps &lt;code&gt;getCode&#39;&lt;/code&gt;, giving &lt;code&gt;rec&lt;/code&gt; an initial value of &lt;code&gt;[]&lt;/code&gt;, meaning no path record at the Huffman tree&amp;rsquo;s root node.&lt;/p&gt;
&lt;h4 id=&#34;decoding&#34;&gt;&lt;a href=&#34;#decoding&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Decoding
&lt;/h4&gt;&lt;p&gt;Basic approach: Move through the tree based on &lt;code&gt;Bit&lt;/code&gt;, &lt;code&gt;L&lt;/code&gt; - move to left subtree, &lt;code&gt;R&lt;/code&gt; - move to right subtree. When reaching a &lt;code&gt;Leaf&lt;/code&gt; subtree, one character is decoded. Then return to the root node to continue decoding the next character until the &lt;code&gt;Bit&lt;/code&gt; list is empty.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#57606a&#34;&gt;-- decode one symbol&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decodeOne&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decodeOne&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L:&lt;/span&gt;bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;s&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decodeOne&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R:&lt;/span&gt;bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;s&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decodeOne&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; node &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L:&lt;/span&gt;bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; decodeOne node bs
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decodeOne&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; node &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;R:&lt;/span&gt;bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; decodeOne node bs
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#57606a&#34;&gt;-- decode from scratch &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decode&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decode&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decode&lt;/span&gt; t bs &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#cf222e&#34;&gt;let&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;s&lt;span style=&#34;color:#1f2328&#34;&gt;,&lt;/span&gt; remainBits&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; decodeOne t bs
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#cf222e&#34;&gt;in&lt;/span&gt; s&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; decode t remainBits
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;¬ª &lt;code&gt;decodeOne&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Base case: When the current &lt;code&gt;Bit&lt;/code&gt;&amp;rsquo;s corresponding subtree is a &lt;code&gt;Leaf&lt;/code&gt;, one character is decoded. Return that character and the remaining &lt;code&gt;Bit&lt;/code&gt;s.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recursive step: When the current &lt;code&gt;Bit&lt;/code&gt;&amp;rsquo;s corresponding subtree is a &lt;code&gt;Node&lt;/code&gt;, continue recursive decoding on that &lt;code&gt;Node&lt;/code&gt; until reaching the base case.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;¬ª &lt;code&gt;decode&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Base case: Empty &lt;code&gt;Bit&lt;/code&gt; list means decoding is complete.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Recursive step: For non-empty &lt;code&gt;Bit&lt;/code&gt; list, pass the root node and current &lt;code&gt;Bit&lt;/code&gt; list to &lt;code&gt;decodeOne&lt;/code&gt; for single character decoding. After one character is decoded, continue decoding remaining &lt;code&gt;Bit&lt;/code&gt;s from the root node until the &lt;code&gt;Bit&lt;/code&gt; list is empty.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;¬ª How to return to root node:&lt;/p&gt;
&lt;p&gt;Initially, the function signature I wrote was &lt;code&gt;decode :: HuffmanTree a -&amp;gt; HuffmanTree a -&amp;gt; Bits -&amp;gt; [a]&lt;/code&gt;, with two &lt;code&gt;HuffmanTree&lt;/code&gt; parameters representing the original root node and current node. Implementation was roughly:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decode&amp;#39;&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Bits&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;decode&amp;#39;&lt;/span&gt; originT &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Leaf&lt;/span&gt; s &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;L:&lt;/span&gt;bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; s&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;decode&amp;#39; originT originT bs&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#57606a&#34;&gt;--snip--&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This didn&amp;rsquo;t feel quite right since the &lt;code&gt;originT&lt;/code&gt; parameter never changed during recursion, so I slightly modified the recursive structure to write the above &lt;code&gt;decode&lt;/code&gt; and &lt;code&gt;decodeOne&lt;/code&gt;. SICP uses closures to remember the initial root node.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;structure-and-destructure-of-compound-data&#34;&gt;&lt;a href=&#34;#structure-and-destructure-of-compound-data&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Structure and Destructure of Compound Data
&lt;/h2&gt;&lt;h3 id=&#34;sicp-data-but-functions&#34;&gt;&lt;a href=&#34;#sicp-data-but-functions&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;SICP: Data, but Functions?
&lt;/h3&gt;&lt;h4 id=&#34;consistency&#34;&gt;&lt;a href=&#34;#consistency&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Consistency
&lt;/h4&gt;&lt;p&gt;We want to use &lt;strong&gt;structured&lt;/strong&gt; data‚Äîrather than scattered variables‚Äîas program components, thus we have compound data like &lt;code&gt;struct&lt;/code&gt; / &lt;code&gt;class&lt;/code&gt;. The question then becomes how to extract the fields used to construct compound data. One thing extraction needs to ensure is consistency of fields before and after extraction. This is mainly the compiler&amp;rsquo;s work, but if we want to demonstrate this at the source code level, how can we do it? SICP 2.1.3 (Page 124) does it this way:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scheme&#34; data-lang=&#34;scheme&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;cons &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;dispatch&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;m&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;cond &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;((&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;= &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#1f2328&#34;&gt;((&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;= &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;              &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;else &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;error&lt;/span&gt; &lt;span style=&#34;color:#0a3069&#34;&gt;&amp;#34;Argument not 0 or 1: CONS&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;m&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#953800&#34;&gt;dispatch&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;car &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;z&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;cdr &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;z&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Exercise 2.4 (Page 125) has an elegant implementation using lambda:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-scheme&#34; data-lang=&#34;scheme&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;cons &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;m&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;m&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;x&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;y&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;define &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;car &lt;/span&gt;&lt;span style=&#34;color:#953800&#34;&gt;z&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;z&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;lambda &lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;p&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;q&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#953800&#34;&gt;p&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ÔºàFor Pure Lambda Calculus implementation of this example, see the &lt;a class=&#34;link&#34; href=&#34;#lambda-calculus---pair-abstraction&#34; &gt;last section of this article&lt;/a&gt;.Ôºâ&lt;/p&gt;
&lt;p&gt;A key point this chapter of SICP emphasizes is: The boundary between data and procedures isn&amp;rsquo;t so clear-cut. The above two programs demonstrate this precisely: the list constructor returns a procedure that provides an interface to access the &lt;strong&gt;elements composing the list&lt;/strong&gt;, which enables the definition of &lt;code&gt;car&lt;/code&gt; / &lt;code&gt;cdr&lt;/code&gt;.&lt;/p&gt;
&lt;h4 id=&#34;data-combination-and-extraction--program-construction-abstraction-layer&#34;&gt;&lt;a href=&#34;#data-combination-and-extraction--program-construction-abstraction-layer&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Data Combination and Extraction ‚Üí Program Construction: Abstraction Layer
&lt;/h4&gt;&lt;p&gt;Combination in LISP (&lt;strong&gt;LIS&lt;/strong&gt;t &lt;strong&gt;P&lt;/strong&gt;rogramming) can be simple - data is combined by constructing lists, like &lt;code&gt;(list 1 2 3)&lt;/code&gt; / &lt;code&gt;(list 3 4 (list 9 7) 5)&lt;/code&gt;, you can implement pair, tree, etc. with lists.&lt;/p&gt;
&lt;p&gt;However, data within programs can&amp;rsquo;t directly flow between functions in this form, so we have abstraction layers:&lt;/p&gt;
&lt;img src=&#34;abstraction_barrier.png&#34; alt=&#34;abstraction barrier&#34; style=&#34;zoom:80%; box-shadow: 2px 2px 3px rgba(155, 171, 187,0.7);&#34; /&gt;
&lt;p&gt;Constructor (&lt;code&gt;make-rat&lt;/code&gt;) and selector (&lt;code&gt;denom&lt;/code&gt;, &lt;code&gt;numer&lt;/code&gt;) represent one level of abstraction from primitive data types to compound data, giving programs (functions above this abstraction layer, like &lt;code&gt;add-rat&lt;/code&gt; / &lt;code&gt;sub-rat&lt;/code&gt;) a higher perspective to view data. Data is no longer just scattered integers/floats, but &lt;code&gt;rat&lt;/code&gt; that can be constructed/extracted/analyzed. Functions above &lt;code&gt;add-rat&lt;/code&gt; / &lt;code&gt;sub-rat&lt;/code&gt; don&amp;rsquo;t need to care about rat&amp;rsquo;s implementation details, they just need to use operations like &lt;code&gt;add-rat&lt;/code&gt; to solve problems. The process of program construction is a process of raising abstraction levels.&lt;/p&gt;
&lt;h3 id=&#34;haskell-pattern-match&#34;&gt;&lt;a href=&#34;#haskell-pattern-match&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Haskell: Pattern Match
&lt;/h3&gt;&lt;!-- ÂÜôËøá Lisp ‰ºöÊõ¥ÊáÇ Haskell ÁöÑÂ•ΩÔºåÂ∞±ÂÉèÂÜôËøá C ÂèØ‰ª•Êõ¥Â•ΩÂú∞‰Ωì‰ºö Python ÂºÄÂèëÁöÑ‰æøÊç∑ÔºåËøôÈáåÂè™ÊòØËÄÉÈáèËØ≠Ê≥ïÁöÑÊòìÁî®ÊÄßÔºåÊ≤°ÊúâÂØπ‰∫éÊÄßËÉΩ/Â∫îÁî®Âú∫ÊôØÁ≠âÂÖ∂‰ªñÊñπÈù¢ÁöÑÊØîËæÉ. --&gt;
&lt;p&gt;In Haskell, how do we handle the issue of &lt;strong&gt;data construction and extraction&lt;/strong&gt;?&lt;/p&gt;
&lt;!-- &lt;span style=&#34;color: #888888; font-size: 0.85em;&#34;&gt;ÔºàÊûÑÈÄ†Â≠ê constructorÔºå ÊûÑÈÄ† compound data ÁöÑÂáΩÊï∞ÔºåÁ°ÆÂÆûÊòØÊúâËøô‰∏™ËØçÔºõÊèêÂèñÂ≠êÔºå‰∏çÁü•ÈÅìÊòØ‰∏çÊòØÊúâËøô‰∏™ËØçÔºåÊàëÁºñÁöÑÔºåÊÑèÊÄùÊòØÂ∞ÜÁªÑÊàêÁöÑ compound data ÁöÑÂ≠óÊÆµÊèêÂèñÂá∫Êù•Ôºå‰∏Ä‰∏™‰æãÂ≠êÊòØÂúÜÁÇπ/ÊàêÂëòËøêÁÆóÁ¨¶ `person.age` Ôºâ&lt;/span&gt; --&gt;
&lt;p&gt;&lt;strong&gt;Construction:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The syntax for declaring compound data is:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Point&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Point&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This defines the &lt;code&gt;Point&lt;/code&gt; type with a constructor &lt;code&gt;Point Int Int&lt;/code&gt;, which can then be used to construct compound data of type &lt;code&gt;Point&lt;/code&gt;, like &lt;code&gt;p = Point 1 2&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Extraction:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;mark&gt;&lt;strong&gt;Pattern Match&lt;/strong&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;A simple example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getX&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Point&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;getX&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Point&lt;/span&gt; x &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt;&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; x
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Notably: How you construct the compound data (&lt;code&gt;Point Int Int&lt;/code&gt;) is how you match it (&lt;code&gt;Point x _&lt;/code&gt;). That is‚Äî&lt;strong&gt;how you structure is how you destructure&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;One advantage of this syntax is that you can &lt;strong&gt;parse function parameters&lt;/strong&gt; through Pattern Matching. For example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;HuffmanTree&lt;/span&gt; a
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;[]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;...&lt;/span&gt;          &lt;span style=&#34;color:#57606a&#34;&gt;-- empty leaf list ‚Üí return empty tree&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;[&lt;/span&gt;t&lt;span style=&#34;color:#1f2328&#34;&gt;]&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;...&lt;/span&gt;         &lt;span style=&#34;color:#57606a&#34;&gt;-- only one leaf ‚Üí return tree with just root node&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;constructHuffTree&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;x&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;y&lt;span style=&#34;color:#cf222e&#34;&gt;:&lt;/span&gt;ts&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;...&lt;/span&gt;    &lt;span style=&#34;color:#57606a&#34;&gt;-- two or more leaves ‚Üí recursively build Huffman tree&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;This demonstrates that: &lt;strong&gt;The way function parameters are destructured determines the function&amp;rsquo;s behavior.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;For example, consider this problem: counting the number of nodes in a binary tree&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-hs&#34; data-lang=&#34;hs&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;data&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Tree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Empty&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;|&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; a &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Tree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Tree&lt;/span&gt; a&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;treeSize&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;::&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Tree&lt;/span&gt; a &lt;span style=&#34;color:#0550ae&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Int&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;treeSize&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;Empty&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#6639ba&#34;&gt;treeSize&lt;/span&gt; &lt;span style=&#34;color:#1f2328&#34;&gt;(&lt;/span&gt;&lt;span style=&#34;color:#cf222e&#34;&gt;Node&lt;/span&gt; &lt;span style=&#34;color:#cf222e&#34;&gt;_&lt;/span&gt; left right&lt;span style=&#34;color:#1f2328&#34;&gt;)&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;1&lt;/span&gt; &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; treeSize left &lt;span style=&#34;color:#0550ae&#34;&gt;+&lt;/span&gt; treeSize right
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Empty tree constructed with &lt;code&gt;Empty&lt;/code&gt; constructor ‚Üí directly return &lt;code&gt;0&lt;/code&gt; (base case)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Non-empty tree constructed with &lt;code&gt;Node&lt;/code&gt; constructor ‚Üí solve recursively (recursive step)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;How we construct data determines how we process it, and in Haskell, the form of constructing data matches the form of pattern matching on data, so we can do pattern matching in function parameter positions, with each pattern corresponding to a function behavior.&lt;/p&gt;
&lt;h3 id=&#34;lambda-calculus---pair-abstraction&#34;&gt;&lt;a href=&#34;#lambda-calculus---pair-abstraction&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;Lambda Calculus - &lt;code&gt;pair&lt;/code&gt; abstraction
&lt;/h3&gt;&lt;h4 id=&#34;pair-abstraction-in-pure-lambda-calculus&#34;&gt;&lt;a href=&#34;#pair-abstraction-in-pure-lambda-calculus&#34; class=&#34;header-anchor&#34;&gt;&lt;/a&gt;&lt;code&gt;pair&lt;/code&gt; abstraction in Pure Lambda Calculus
&lt;/h4&gt;&lt;p&gt;‰∏äThe example mentioned in the &lt;a class=&#34;link&#34; href=&#34;#consistency&#34; &gt;Consistency&lt;/a&gt;section can be &lt;cite&gt;implemented in pure Lambda Calculus:&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/cite&gt;Ôºö&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;pair = Œªm Œªn Œªb. b m n
pair v w = Œªb. b v w
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;This abstraction provides this perspective: through two applications of &lt;code&gt;pair&lt;/code&gt;, we instantiate &lt;code&gt;m&lt;/code&gt; and &lt;code&gt;n&lt;/code&gt;, determining the elements contained in the pair, leaving &lt;code&gt;b&lt;/code&gt; as an interface for subsequent operations on the pair elements. To extract elements from the pair in order, we can define &lt;code&gt;fst&lt;/code&gt; and &lt;code&gt;snd&lt;/code&gt;:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;fst = Œªa Œªb. a
snd = Œªa Œªb. b

(pair v w) fst  ‚Üí v     // parentheses here can be omitted , according to left associativity convention
(pair v w) snd  ‚Üí w
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;If you prefer programming style like &lt;code&gt;fst (pair v w)&lt;/code&gt;, that&amp;rsquo;s also possible:&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-block&#34; data-lang=&#34;block&#34;&gt;tru = Œªt Œªf. t      // Œ±-equivalent to `fst` defined in previous code block, we can understand the same abstraction differently
fls = Œªt Œªf. f      //          ...    `snd`    ...

fst = Œªp. p tru
snd = Œªp. p fls

fst (pair v w)  ‚Üí v 
snd (pair v w)  ‚Üí w 
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Let&amp;rsquo;s examine this abstraction again: &lt;code&gt;pair = Œªm Œªn Œªb. b m n&lt;/code&gt;. In Lambda Calculus, what we commonly call functions are termed abstractions, and this &lt;code&gt;pair&lt;/code&gt; abstraction provides an abstraction over the construction and operation of pairs. We first determine the contained elements through outer parameters &lt;code&gt;m&lt;/code&gt; and &lt;code&gt;n&lt;/code&gt; to build the pair, then use inner parameter &lt;code&gt;b&lt;/code&gt; to execute operations on the existing elements. From this perspective, pair naturally possesses the ability to interact with other functions (abstractions) within the Lambda Calculus system, because after instantiating the pair elements, it provides the interaction interface &lt;code&gt;b&lt;/code&gt;, waiting for other abstractions to interact with the pair&amp;rsquo;s existing elements through application.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34;&gt;
&lt;p&gt;Types and Programming Languages - Chapter 5 The Untyped Lambda-Calculus&amp;#160;&lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
        </item>
        
    </channel>
</rss>
